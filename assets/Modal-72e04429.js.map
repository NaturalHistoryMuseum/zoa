{"version":3,"mappings":"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","names":["inputId","inject","labelId","helpId","value","useChangeEmits","emit","props","target","ref","__expose","labelPosition","showText","helpContainer","isHovered","useElementHover","watch","onKeyStroke","dropdownOptions","computed","outputOptions","o","container","textbox","dropdown","focused","textboxFocus","useFocus","dropdownFocus","useFocusWithin","unfocus","onClickOutside","selectedElement","setOption","text","valueChanged","rootContainer","checkboxInput","focus","label","_checkValue","checked","newValue","toggleValue","check","currentValue","v","en","dateNames","require$$0","dateUtils","__vitePreload","minDate","_minDate","maxDate","_maxDate","displayBox","yearBtns","monthBtns","dayBtns","yrM","yrC","yrD","yrY","editing","yearBtnsFocus","yearBtnsFocusWithin","monthBtnsFocus","monthBtnsFocusWithin","dayBtnsFocus","dayBtnsFocusWithin","focusedContainer","buttonContainer","focusedButtons","addListener","boxRef","nextBoxRef","prevBoxRef","e","watchEffect","returnDate","year","month","day","currentRange","displayDate","formatDate","lowerYear","upperYear","yearDefined","scale","_yearPartKeys","k","ix","yearParts","currentYear","getPartialYear","minYear","maxYear","isMinYear","isMaxYear","lowerMonth","_month","upperMonth","isMinMonth","isMaxMonth","lowerDay","_day","upperDay","getMonthDays","validate","y","m","d","nullYear","nullMonth","nullDay","basicValidMonth","basicValidDay","validMonth","validDay","refreshDisplay","guessedDates","_parseInput","event","du","parseInput","debounce","setDate","date","yearToParts","yr","x","yearOptions","clear","keyIx","base","i","getOptsForYearPart","yearPartIx","key","lowerBound","upperBound","opt","partialYear","yearOpts","leapYear","formatYear","yrParts","p","digitCount","c","setYear","valid","monthDays","monthOptions","options","datenames","rem","monthIx1","dayOptions","mnth","mnthDays","_","mName","a","b","orderSort","labelSort","searchExact","needle","haystack","startIndex","endIndex","index","reverse","string","utils","isEditDistanceNoGreaterThan","maxDist","lenDelta","firstDiffIdx","lastDiffIdx","dist","length","_expand","editDistance","scores","_prevScore","prevScore","makeChar2needleIdx","res","fuzzySearch","ngramLen","fuzzySearchNgrams","fuzzySearchCandidates","firstDiff","newScores","minScore","minScoreIdx","maxGoodScore","firstGoodScoreIdx","lastGoodScoreIdx","haystackIdx","char","needleIdxStart","needleIdxLimit","needleIdx","score","lastScore","needleLen","haystackLen","ngramStartIdx","ngram","ngramEnd","needleBeforeReversed","needleAfter","startIdx","endIdx","haystackMatchIdx","distRight","rightExpandSize","distLeft","leftExpandSize","char2needleIdx","prevCandidates","candidates","haystackChar","candidate","nSkipped","levenshteinSearch","buffer","subId","_search","emitSearch","searchTerm","updateSearch","search","itemString","allOptions","groupSort","filteredItems","doSearch","searchString","checkMatch","txt","filteredOptions","items","grouped","group","g","groupName","groupOptions","useScroll","scrollY","dropdownHeight","lowerVisible","upperVisible","startFocus","toggleFocus","labels","lbl","selectAll","selectFiltered","unchecked","selectGroup","trackLower","trackUpper","elements","valueLower","valueUpper","maxLower","minUpper","range","lower","upper","slider","valueLabel","_validMin","_validMax","sliderFocus","labelFocus","valueLabelText","activeTrackStyle","handlePosition","fraction","getHandlePosition","trackWidth","handleWidth","labelWidth","halfTrack","offset","labelOffset","percentOffset","pos","getInitialValue","exactMidpoint","stepDeviation","stepUp","stepDown","onScroll","zoaInputConfig","ZoaCheckbox","ZoaDateAmbiguous","ZoaDateSimple","ZoaDropdown","ZoaMultiselect","ZoaNumber","ZoaRangeSlider","ZoaSlider","ZoaAutocompleteTextbox","ZoaTextbox","zoaInput","_zoaInput","ZoaInputComponent","componentId","useComponentId","rootClassKeys","_keys","addPropClasses","usePropClasses","_label","_labelPosition","_helpId","provide","inputComponent","blur","icon","useKindIcon","modal","openModal"],"sources":["../../src/components/inputs/textbox/Textbox.vue","../../src/components/inputs/_parts/Label.vue","../../src/components/inputs/_parts/Help.vue","../../src/components/inputs/textbox/AutocompleteTextbox.vue","../../src/components/inputs/checkbox/Checkbox.vue","../../node_modules/date-names/en.js","../../node_modules/date-names/index.js","../../src/components/inputs/date/DateAmbiguous.vue","../../src/components/inputs/date/DateSimple.vue","../../src/components/inputs/dropdown/Dropdown.vue","../../node_modules/levenshtein-search/utils.js","../../node_modules/levenshtein-search/levenshtein-search.js","../../node_modules/levenshtein-search/index.js","../../src/components/inputs/dropdown/Multiselect.vue","../../src/components/inputs/number/Number.vue","../../src/components/inputs/slider/RangeSlider.vue","../../src/components/inputs/slider/Slider.vue","../../src/components/inputs/zoaInputs.js","../../src/components/inputs/Input.vue","../../src/components/dialogs/modal/Modal.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <input\n      type=\"text\"\n      :placeholder=\"placeholder\"\n      :id=\"inputId\"\n      :class=\"$style.input\"\n      v-model=\"value\"\n      ref=\"target\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { useChangeEmits } from '../common.js';\nimport { inject, ref } from 'vue';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: String,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * Text to display in the blank input.\n   */\n  placeholder: {\n    type: [String, undefined],\n    default: null,\n  },\n});\n\nconst inputId = inject('inputId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {string} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { value } = useChangeEmits(emit, props);\n\n// ELEMENTS\nconst target = ref(null);\n\n// EXPOSE\ndefineExpose({\n  target,\n});\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n</style>\n","<template>\n  <label\n    v-if=\"label && !legend\"\n    :id=\"labelId\"\n    :for=\"inputId\"\n    :class=\"[$style.main, $style[`main--${labelPosition}`]]\"\n    :tabindex=\"tabbable ? 0 : -1\"\n  >\n    {{ label }}\n  </label>\n  <legend\n    v-else-if=\"label\"\n    :id=\"labelId\"\n    :class=\"[$style.main, $style[`main--${labelPosition}`]]\"\n  >\n    {{ label }}\n  </legend>\n</template>\n\n<script setup>\nimport { inject } from 'vue';\n\nconst props = defineProps({\n  label: {\n    type: String,\n  },\n  labelPosition: {\n    type: String,\n    default: 'above',\n  },\n  inputId: {\n    type: String,\n  },\n  legend: {\n    type: Boolean,\n    default: false,\n  },\n  tabbable: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst labelId = inject('labelId');\n</script>\n\n<style module lang=\"scss\">\n@import '../../../styles/fonts';\n@import '../../../styles/vars';\n\n.main {\n  @include header-font;\n  font-size: 0.9em;\n  grid-area: label;\n\n  &.main--right {\n    justify-self: left;\n  }\n\n  &.main--left {\n    justify-self: right;\n  }\n\n  &.main--above,\n  &.main--below {\n    padding: 0 $h-pad;\n  }\n\n  &.main--none {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n  }\n}\n</style>\n","<template>\n  <div\n    :class=\"[$style.main, $style[`main--${labelPosition}`]]\"\n    ref=\"helpContainer\"\n  >\n    <font-awesome-icon\n      :icon=\"['fa-solid', 'fa-circle-question']\"\n      :class=\"$style.icon\"\n    />\n    <div\n      v-show=\"showText\"\n      :class=\"[$style.popup, $style[`popup--${position}`]]\"\n      :id=\"helpId\"\n      role=\"tooltip\"\n    >\n      <slot>\n        {{ text }}\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport FontAwesomeIcon from '../../../icons.js';\nimport { ref, inject, watch } from 'vue';\nimport { onKeyStroke, useElementHover } from '@vueuse/core';\n\nconst props = defineProps({\n  text: {\n    type: String,\n  },\n  position: {\n    type: String,\n    default: 'right',\n  },\n});\n\nconst labelPosition = inject('labelPosition');\nconst helpId = inject('helpId');\n\nconst showText = ref(false);\n\n// we want to change showText when isHovered is changed, but we also need to\n// change it separately (e.g. on Esc keypress)\nconst helpContainer = ref(null);\nconst isHovered = useElementHover(helpContainer, { delayEnter: 500 });\nwatch(isHovered, () => {\n  showText.value = isHovered.value;\n});\n\nonKeyStroke('Escape', () => (showText.value = false));\n</script>\n\n<style module lang=\"scss\">\n@import '../../../styles/palette';\n@import '../../../styles/vars';\n\n.main {\n  position: relative;\n  grid-area: help;\n  width: min-content;\n\n  &.main--above,\n  &.main--below {\n    padding: 0;\n  }\n}\n\n.icon {\n  color: $grey;\n}\n\n.popup {\n  position: absolute;\n  background: white;\n  border: 1px solid $grey;\n  border-radius: $rounding;\n  padding: $box-padding;\n  z-index: 9999;\n  width: max-content;\n  max-width: 350px;\n\n  &.popup--right {\n    right: 0;\n  }\n}\n</style>\n","<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    ref=\"container\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <input\n      type=\"text\"\n      :placeholder=\"placeholder\"\n      :id=\"inputId\"\n      :class=\"$style.input\"\n      v-model=\"value\"\n      @focusin=\"focused = true\"\n      ref=\"textbox\"\n    />\n    <div :class=\"$style.options\" v-if=\"focused\" ref=\"dropdown\">\n      <ul v-if=\"dropdownOptions.length > 0\">\n        <li\n          v-for=\"opt in dropdownOptions\"\n          :class=\"$style.option\"\n          @click=\"setOption(opt.value)\"\n          tabindex=\"0\"\n        >\n          <span>{{ opt.label }}</span>\n          <input type=\"hidden\" :value=\"opt.value\" />\n        </li>\n      </ul>\n      <div :class=\"$style.noOptions\" v-else>No options found</div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { useChangeEmits } from '../common.js';\nimport { computed, inject, ref } from 'vue';\nimport {\n  onClickOutside,\n  onKeyStroke,\n  useFocusWithin,\n  useFocus,\n} from '@vueuse/core';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: String,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * Text to display in the blank input.\n   */\n  placeholder: {\n    type: [String, undefined],\n    default: null,\n  },\n  /**\n   * The options available to select. Each item can be a string, or an object with `label` and `value` keys.\n   */\n  options: {\n    type: Array,\n  },\n});\n\nconst inputId = inject('inputId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {string} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { value } = useChangeEmits(emit, props);\n\nconst dropdownOptions = computed(() => {\n  let outputOptions = [];\n  props.options.forEach((o) => {\n    if (typeof o === 'object') {\n      outputOptions.push({ label: o.label, value: o.value });\n    } else {\n      outputOptions.push({ label: o, value: o });\n    }\n  });\n  return outputOptions;\n});\n\n// ELEMENTS\nconst container = ref(null);\nconst textbox = ref(null);\nconst dropdown = ref(null);\n\n// EXPOSE\ndefineExpose({\n  target: textbox,\n});\n\nconst focused = ref(false);\nconst textboxFocus = useFocus(textbox);\nconst dropdownFocus = useFocusWithin(dropdown);\n\nfunction unfocus() {\n  try {\n    container.value.blur();\n    textbox.value.blur();\n    dropdown.value.blur();\n  } catch {\n    // doesn't really matter\n  }\n  focused.value = false;\n}\n\nonClickOutside(container, () => {\n  focused.value = false;\n});\n\nonKeyStroke('ArrowDown', () => {\n  if (dropdownOptions.value.length === 0) {\n    return;\n  }\n  if (textboxFocus.focused.value) {\n    dropdown.value.children[0].children[0].focus();\n  } else if (dropdownFocus.focused.value) {\n    const selectedElement = dropdown.value.querySelector('li:focus');\n    if (!selectedElement || !selectedElement.nextElementSibling) {\n      dropdown.value.children[0].children[0].focus();\n    } else {\n      selectedElement.nextElementSibling.focus();\n    }\n  }\n});\n\nonKeyStroke('ArrowUp', () => {\n  if (dropdownOptions.value.length === 0) {\n    return;\n  }\n  if (dropdownFocus.focused.value) {\n    const selectedElement = dropdown.value.querySelector('li:focus');\n    if (!selectedElement || !selectedElement.previousElementSibling) {\n      textbox.value.focus();\n    } else {\n      selectedElement.previousElementSibling.focus();\n    }\n  }\n});\n\nonKeyStroke('Enter', () => {\n  if (dropdownFocus.focused.value) {\n    const selectedElement = dropdown.value.querySelector('li:focus');\n    if (selectedElement) {\n      setOption(selectedElement.querySelector('input').value);\n    }\n  }\n  unfocus();\n});\n\nfunction setOption(text) {\n  value.value = text;\n  unfocus();\n}\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n\n.inputWrapper {\n  position: relative;\n}\n\n.options {\n  position: absolute;\n  background: white;\n  border: 1px solid $grey;\n  border-radius: $rounding;\n  width: 100%;\n  margin-top: 2px;\n  font-size: 0.9em;\n\n  & > ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n}\n\n.option {\n  padding: $padding;\n\n  &:hover,\n  &:focus {\n    background: $secondary;\n  }\n\n  &:first-child {\n    border-radius: $rounding $rounding 0 0;\n  }\n\n  &:last-child {\n    border-radius: 0 0 $rounding $rounding;\n  }\n}\n\n.noOptions {\n  font-size: 0.8em;\n  font-style: italic;\n  padding: $padding;\n  opacity: 0.8;\n}\n</style>\n","<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <input\n      type=\"checkbox\"\n      :id=\"inputId\"\n      :class=\"$style.defaultCheckbox\"\n      v-model=\"checked\"\n      :name=\"name ? name : null\"\n      :value=\"_checkValue\"\n      ref=\"checkboxInput\"\n    />\n    <span :class=\"$style.checkbox\" @click=\"toggleValue\">\n      <font-awesome-icon icon=\"fa-solid fa-check\" :class=\"$style.check\" />\n    </span>\n  </div>\n</template>\n\n<script setup>\nimport FontAwesomeIcon from '../../../icons.js';\nimport { useChangeEmits } from '../common.js';\nimport { useFocusWithin, onKeyStroke } from '@vueuse/core';\nimport { ref, computed, inject } from 'vue';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: [Boolean, Array],\n    default: undefined,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 0,\n  },\n  /**\n   * An optional name for the checkbox; if this is set, the checkbox will return\n   * the checkValue/label instead of a boolean.\n   */\n  name: {\n    type: [String, null],\n    default: null,\n  },\n  /**\n   * An optional alternative value for the checkbox to return. If not specified,\n   * the label value will be used.\n   */\n  checkValue: {\n    type: [String, null],\n    default: null,\n  },\n});\n\nconst inputId = inject('inputId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {boolean} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { value, valueChanged } = useChangeEmits(emit, props);\n\n// ELEMENTS\nconst rootContainer = inject('rootContainer');\nconst checkboxInput = ref(null);\n\n// STATE\nconst focus = useFocusWithin(rootContainer);\n\n// EXPOSE\ndefineExpose({\n  target: checkboxInput,\n});\n\nconst label = inject('label');\nconst _checkValue = computed(() => {\n  return props.checkValue || label.value;\n});\n\nconst checked = computed({\n  get() {\n    if (props.name) {\n      return value.value || [];\n    } else {\n      return value.value || false;\n    }\n  },\n  set(newValue) {\n    valueChanged(newValue);\n  },\n});\n\nfunction toggleValue() {\n  // if the same v-model is set on a group of checkboxes, they return an array\n  // of their _checkValue values instead of a single boolean.\n  if (props.name) {\n    // if it's currently unchecked, we want to check it, and vice versa\n    let check = !checked.value.includes(_checkValue.value);\n    // double-check the value isn't on there already\n    let currentValue = checked.value.filter((v) => v !== _checkValue.value);\n    if (check) {\n      currentValue.push(_checkValue.value);\n    }\n    checked.value = currentValue;\n  } else {\n    checked.value = !checked.value;\n  }\n}\n\nonKeyStroke(' ', () => {\n  if (focus.focused.value) {\n    toggleValue();\n  }\n});\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n\n.defaultCheckbox {\n  display: none;\n}\n\n.checkbox {\n  height: 1.5em;\n  width: 1.5em;\n  cursor: pointer;\n  background: white;\n  border: 1px solid $grey;\n  border-radius: $rounding;\n  position: relative;\n  display: block;\n\n  .defaultCheckbox:checked ~ & {\n    background: $primary-a;\n\n    & > .check {\n      display: block;\n    }\n  }\n}\n\n.check {\n  display: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  margin: auto;\n}\n\n.inputWrapper {\n  justify-self: center;\n}\n</style>\n","\"use strict\";\n\nmodule.exports = {\n  __locale: \"en\",\n  days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n  abbreviated_days: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n  months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n  abbreviated_months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  am: 'AM',\n  pm: 'PM'\n};\n","\"use strict\";\nmodule.exports = require('./en');\n","<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <input\n      type=\"text\"\n      :placeholder=\"placeholder\"\n      :id=\"inputId\"\n      :class=\"[$style.input, editing ? $style.editing : '']\"\n      ref=\"displayBox\"\n      @input=\"parseInput\"\n    />\n    <div v-if=\"focused\" :class=\"$style.datePopup\">\n      <div :class=\"$style.popupSection\" v-if=\"guessedDates.length > 0\">\n        <span\n          v-for=\"dt in guessedDates\"\n          @click=\"setDate(dt)\"\n          @keydown.enter=\"setDate(dt)\"\n          :class=\"$style.suggestion\"\n          tabindex=\"0\"\n          >{{ formatDate(dt.year, dt.month, dt.day) }}</span\n        >\n      </div>\n      <div :class=\"$style.popupSection\">\n        <zoa-input label=\"year\" :grid-class=\"$style.yearParts\">\n          <zoa-input\n            zoa-type=\"number\"\n            label=\"millenium\"\n            label-position=\"none\"\n            :options=\"{ placeholder: 0, min: 0, max: 9 }\"\n            v-model=\"yearParts.millenium\"\n            ref=\"yrM\"\n          />\n          <zoa-input\n            zoa-type=\"number\"\n            label=\"century\"\n            label-position=\"none\"\n            :options=\"{ placeholder: 0, min: 0, max: 9 }\"\n            v-model=\"yearParts.century\"\n            ref=\"yrC\"\n          />\n          <zoa-input\n            zoa-type=\"number\"\n            label=\"decade\"\n            label-position=\"none\"\n            :options=\"{ placeholder: 0, min: 0, max: 9 }\"\n            v-model=\"yearParts.decade\"\n            ref=\"yrD\"\n          />\n          <zoa-input\n            zoa-type=\"number\"\n            label=\"year\"\n            label-position=\"none\"\n            :options=\"{ placeholder: 0, min: 0, max: 9 }\"\n            v-model=\"yearParts.year\"\n            ref=\"yrY\"\n          />\n        </zoa-input>\n        <div :class=\"$style.yearGrid\" tabindex=\"0\" ref=\"yearBtns\">\n          <zoa-button\n            v-for=\"opt in yearOptions\"\n            size=\"sm\"\n            @click=\"setYear(opt)\"\n            tabindex=\"-1\"\n            >{{ formatYear(opt) }}\n          </zoa-button>\n        </div>\n      </div>\n      <div :class=\"$style.popupSection\">\n        <zoa-input\n          zoa-type=\"number\"\n          label=\"month\"\n          :options=\"{ placeholder: 1, min: 1, max: 12 }\"\n          v-model=\"month\"\n        />\n        <div :class=\"$style.monthGrid\" tabindex=\"0\" ref=\"monthBtns\">\n          <zoa-button\n            v-for=\"opt in monthOptions\"\n            size=\"sm\"\n            @click=\"month = opt[1]\"\n            tabindex=\"-1\"\n            >{{ opt[0] }}\n          </zoa-button>\n        </div>\n      </div>\n      <div :class=\"$style.popupSection\">\n        <zoa-input\n          zoa-type=\"number\"\n          label=\"day\"\n          :options=\"{ placeholder: 1, min: 1, max: monthDays }\"\n          v-model=\"day\"\n        />\n        <div :class=\"$style.dayGrid\" tabindex=\"0\" ref=\"dayBtns\">\n          <zoa-button\n            v-for=\"opt in dayOptions\"\n            size=\"sm\"\n            @click=\"day = opt\"\n            tabindex=\"-1\"\n          >\n            {{ opt || 'clear' }}\n          </zoa-button>\n        </div>\n      </div>\n      <div :class=\"$style.popupSection\">\n        <small :class=\"$style.dateRange\">\n          {{ returnDate.earliest }} to {{ returnDate.latest }}\n        </small>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { useChangeEmits } from '../common.js';\nimport { ref, computed, watch, inject, onMounted, watchEffect } from 'vue';\nimport { ZoaInput } from '../../index.js';\nimport ZoaButton from '../button/Button.vue';\nimport { debounce } from 'dettle';\nimport datenames from 'date-names';\nimport { onKeyStroke, useFocus, useFocusWithin } from '@vueuse/core';\n\nconst dateUtils = () => import('../../utils/dates.js');\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: Object,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * Text to display in the blank input.\n   */\n  placeholder: {\n    type: String,\n    default: null,\n  },\n  /**\n   * The earliest accepted date, in yyyy-mm-dd format (or 'today').\n   */\n  min: {\n    type: String,\n    default: '1582-01-01',\n  },\n  /**\n   * The latest accepted date, in yyyy-mm-dd format (or 'today').\n   */\n  max: {\n    type: String,\n    default: 'today',\n  },\n});\n\nconst inputId = inject('inputId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {object} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { valueChanged } = useChangeEmits(emit, props.delay);\n\n// PROP PROCESSING\nconst minDate = computed(() => {\n  let _minDate;\n  try {\n    _minDate = new Date(\n      props.min === 'today'\n        ? Date.now()\n        : Date.parse(props.min || '0000-01-01'),\n    );\n  } catch {\n    _minDate = new Date(0, 0, 1);\n  }\n  return {\n    year: _minDate.getUTCFullYear(),\n    month: _minDate.getUTCMonth() + 1,\n    day: _minDate.getUTCDate(),\n    date: _minDate,\n  };\n});\nconst maxDate = computed(() => {\n  let _maxDate;\n  try {\n    _maxDate = new Date(\n      props.max === 'today'\n        ? Date.now()\n        : Date.parse(props.max || '9999-12-31'),\n    );\n  } catch {\n    _maxDate = new Date(9999, 11, 31);\n  }\n  return {\n    year: _maxDate.getUTCFullYear(),\n    month: _maxDate.getUTCMonth() + 1,\n    day: _maxDate.getUTCDate(),\n    date: _maxDate,\n  };\n});\n\n// ELEMENTS\nconst displayBox = ref(null);\nconst rootContainer = inject('rootContainer');\nconst yearBtns = ref(null);\nconst monthBtns = ref(null);\nconst dayBtns = ref(null);\nconst yrM = ref(null);\nconst yrC = ref(null);\nconst yrD = ref(null);\nconst yrY = ref(null);\n\n// STATE\nconst editing = ref(false);\nconst { focused } = useFocusWithin(rootContainer);\n\n// EXPOSE\ndefineExpose({\n  target: displayBox,\n});\n\n// YEAR/MONTH/DAY BUTTONS\nconst yearBtnsFocus = useFocus(yearBtns);\nconst yearBtnsFocusWithin = useFocusWithin(yearBtns);\nconst monthBtnsFocus = useFocus(monthBtns);\nconst monthBtnsFocusWithin = useFocusWithin(monthBtns);\nconst dayBtnsFocus = useFocus(dayBtns);\nconst dayBtnsFocusWithin = useFocusWithin(dayBtns);\n\nconst focusedContainer = computed(() => {\n  let buttonContainer;\n  if (yearBtnsFocus.focused.value) {\n    buttonContainer = yearBtns.value;\n  } else if (monthBtnsFocus.focused.value) {\n    buttonContainer = monthBtns.value;\n  } else if (dayBtnsFocus.focused.value) {\n    buttonContainer = dayBtns.value;\n  }\n  return buttonContainer;\n});\n\nconst focusedButtons = computed(() => {\n  let buttonContainer;\n  if (yearBtnsFocusWithin.focused.value) {\n    buttonContainer = yearBtns.value;\n  } else if (monthBtnsFocusWithin.focused.value) {\n    buttonContainer = monthBtns.value;\n  } else if (dayBtnsFocusWithin.focused.value) {\n    buttonContainer = dayBtns.value;\n  }\n  return buttonContainer;\n});\n\n// KEYBINDINGS\nonKeyStroke('Enter', () => {\n  if (!focusedContainer) {\n    return;\n  }\n  focusedContainer.value.children[0].focus();\n});\n\nonKeyStroke('ArrowLeft', () => {\n  if (!focusedButtons.value) {\n    return;\n  }\n  const selectedElement = focusedButtons.value.querySelector('button:focus');\n  if (!selectedElement || !selectedElement.previousElementSibling) {\n    focusedButtons.value.children[\n      focusedButtons.value.children.length - 1\n    ].focus();\n  } else {\n    selectedElement.previousElementSibling.focus();\n  }\n});\n\nonKeyStroke('ArrowRight', () => {\n  if (!focusedButtons.value) {\n    return;\n  }\n  const selectedElement = focusedButtons.value.querySelector('button:focus');\n  if (!selectedElement || !selectedElement.nextElementSibling) {\n    focusedButtons.value.children[0].focus();\n  } else {\n    selectedElement.nextElementSibling.focus();\n  }\n});\n\nonKeyStroke('Escape', () => {\n  const selectedElement = rootContainer.value.querySelector('*:focus');\n  if (selectedElement) {\n    selectedElement.blur();\n  }\n});\n\n// add keyup event listeners to the year boxes to auto move to next/prev\nfunction addListener(boxRef, nextBoxRef, prevBoxRef) {\n  if (boxRef.value) {\n    boxRef.value.target.onkeyup = (e) => {\n      if (/^[0-9]$/.test(e.key) && nextBoxRef) {\n        nextBoxRef.value.focus();\n      } else if (e.key === 'Backspace' && prevBoxRef) {\n        prevBoxRef.value.focus();\n      }\n    };\n  }\n}\nwatchEffect(() => {\n  addListener(yrM, yrC, null);\n  addListener(yrC, yrD, yrM);\n  addListener(yrD, yrY, yrC);\n  addListener(yrY, null, yrD);\n});\n\n// THE MAIN DATE\nconst returnDate = computed(() => {\n  return {\n    year: year.value,\n    month: month.value,\n    day: day.value,\n    earliest: `${currentRange.value.lower.year\n      .toString()\n      .padStart(4, '0')}-${currentRange.value.lower.month\n      .toString()\n      .padStart(2, '0')}-${currentRange.value.lower.day\n      .toString()\n      .padStart(2, '0')}`,\n    latest: `${currentRange.value.upper.year\n      .toString()\n      .padStart(4, '0')}-${currentRange.value.upper.month\n      .toString()\n      .padStart(2, '0')}-${currentRange.value.upper.day\n      .toString()\n      .padStart(2, '0')}`,\n  };\n});\n\nconst displayDate = computed(() => {\n  return formatDate(\n    returnDate.value.year,\n    returnDate.value.month,\n    returnDate.value.day,\n  );\n});\n\nconst currentRange = computed(() => {\n  let lowerYear;\n  let upperYear;\n  if (!yearDefined.value) {\n    lowerYear = minDate.value.year;\n    upperYear = maxDate.value.year;\n  } else {\n    let digits =\n      Math.max(\n        ..._yearPartKeys.map((k, ix) => {\n          return isNaN(parseInt(yearParts.value[k])) ? -1 : ix;\n        }),\n      ) + 1;\n    const scale = 10 ** (4 - digits);\n    const currentYear = getPartialYear(yearParts.value, 4);\n    const minYear = Math.floor(minDate.value.year / scale) * scale;\n    const maxYear = Math.floor(maxDate.value.year / scale) * scale;\n\n    if (currentYear < minYear || currentYear > maxYear) {\n      lowerYear = minDate.value.year;\n      upperYear = maxDate.value.year;\n    } else if (currentYear === minYear) {\n      lowerYear = minDate.value.year;\n      upperYear = currentYear + scale - 1;\n    } else if (currentYear === maxYear) {\n      lowerYear = currentYear;\n      upperYear = maxDate.value.year;\n    } else {\n      lowerYear = currentYear;\n      upperYear = currentYear + scale - 1;\n    }\n  }\n\n  const isMinYear = lowerYear === minDate.value.year;\n  const isMaxYear = upperYear === maxDate.value.year;\n  const lowerMonth = isMinYear\n    ? Math.max(minDate.value.month, _month.value || 1)\n    : _month.value || 1;\n  const upperMonth = isMaxYear\n    ? Math.min(maxDate.value.month, _month.value || 12)\n    : _month.value || 12;\n  const isMinMonth = lowerMonth === minDate.value.month;\n  const isMaxMonth = upperMonth === maxDate.value.month;\n\n  let lowerDay = _day.value || 1;\n  let upperDay = _day.value || getMonthDays(upperMonth);\n  lowerDay =\n    isMinYear && isMinMonth ? Math.max(lowerDay, minDate.value.day) : lowerDay;\n  upperDay =\n    isMaxYear && isMaxMonth ? Math.min(upperDay, maxDate.value.day) : upperDay;\n  if (lowerYear === upperYear && lowerMonth === upperMonth) {\n    if (isMaxYear && isMaxMonth && lowerDay > upperDay) {\n      lowerDay = 1;\n    }\n    if (isMinYear && isMinMonth && upperDay < lowerDay) {\n      upperDay = getMonthDays(upperMonth);\n    }\n  }\n\n  return {\n    lower: {\n      year: lowerYear,\n      month: lowerMonth,\n      day: lowerDay,\n      isMinYear,\n      isMinMonth,\n    },\n    upper: {\n      year: upperYear,\n      month: upperMonth,\n      day: upperDay,\n      isMaxYear,\n      isMaxMonth,\n    },\n  };\n});\n\nfunction validate(y, m, d) {\n  const nullYear = isNaN(parseInt(y));\n  const nullMonth = isNaN(parseInt(m));\n  const nullDay = isNaN(parseInt(d));\n  const basicValidMonth = nullMonth || (m <= 12 && m >= 1);\n  const basicValidDay = nullDay || d <= getMonthDays(m);\n\n  if (\n    nullYear ||\n    (y > currentRange.value.lower.year && y < currentRange.value.upper.year)\n  ) {\n    return {\n      year: true,\n      month: basicValidMonth,\n      day: basicValidDay,\n    };\n  }\n  if (y < currentRange.value.lower.year || y > currentRange.value.upper.year) {\n    return {\n      year: false,\n      month: basicValidMonth,\n      day: basicValidDay,\n    };\n  }\n\n  let validMonth = basicValidMonth;\n  let validDay = basicValidDay;\n  if (y === currentRange.value.lower.year) {\n    validMonth =\n      validMonth && (nullMonth || m >= currentRange.value.lower.month);\n    if (m === currentRange.value.lower.month) {\n      validDay = validDay && (nullDay || d >= currentRange.value.lower.day);\n    }\n  }\n  if (y === currentRange.value.upper.year) {\n    validMonth =\n      validMonth && (nullMonth || m <= currentRange.value.upper.month);\n    if (m === currentRange.value.upper.month) {\n      validDay = validDay && (nullDay || d <= currentRange.value.upper.day);\n    }\n  }\n  return {\n    year: true,\n    month: validMonth,\n    day: validDay,\n  };\n}\n\nfunction refreshDisplay() {\n  displayBox.value.value = displayDate.value;\n  editing.value = false;\n}\n\n// PARSING WRITTEN DATES\nconst guessedDates = ref([]);\n\nfunction _parseInput(event) {\n  editing.value = true;\n  dateUtils().then((du) => {\n    guessedDates.value = du.parseDate(event.target.value);\n  });\n}\n\nconst parseInput = debounce(_parseInput, 200);\n\nfunction setDate(date) {\n  yearParts.value = yearToParts(date.year);\n  month.value = date.month;\n  day.value = date.day;\n  guessedDates.value = [];\n}\n\n// YEAR\nconst year = computed(() => {\n  if (!yearDefined.value) {\n    return null;\n  }\n  const yr = getPartialYear(yearParts.value, 4);\n  const validated = validate(yr, month.value, day.value);\n  if (!validated.year) {\n    return null;\n  }\n  return yr;\n});\n\nconst yearParts = ref({\n  millenium: null,\n  century: null,\n  decade: null,\n  year: null,\n});\n// the keys *should* stay in the correct order, but just in case\nconst _yearPartKeys = ['millenium', 'century', 'decade', 'year'];\n\nconst yearDefined = computed(() => {\n  return Object.values(yearParts.value).some((x) => !isNaN(parseInt(x)));\n});\n\nconst yearOptions = computed(() => {\n  const lowerYear = yearToParts(currentRange.value.lower.year);\n  const clear = {\n    millenium: null,\n    century: null,\n    decade: null,\n    year: null,\n  };\n  if (\n    minDate.value.year === maxDate.value.year &&\n    isNaN(parseInt(yearParts.value.year))\n  ) {\n    return [lowerYear];\n  } else if (currentRange.value.lower.year === currentRange.value.upper.year) {\n    return [clear];\n  }\n  const upperYear = yearToParts(currentRange.value.upper.year);\n\n  let keyIx;\n  let base = { ...clear };\n  if (!yearDefined.value) {\n    // if all year parts empty, find where min/max first differ\n    for (let i = 0; i < _yearPartKeys.length; i++) {\n      let k = _yearPartKeys[i];\n      if (lowerYear[k] === upperYear[k]) {\n        base[k] = lowerYear[k];\n      } else if (keyIx == null) {\n        keyIx = i;\n        break;\n      }\n    }\n  } else {\n    // otherwise find the last defined part and add one\n    keyIx =\n      Math.max(\n        ..._yearPartKeys.map((k, ix) => {\n          base[k] = yearParts.value[k];\n          return isNaN(parseInt(yearParts.value[k])) ? -1 : ix;\n        }),\n      ) + 1;\n  }\n\n  function getOptsForYearPart(yearPartIx) {\n    let key = _yearPartKeys[yearPartIx];\n    const lowerBound = getPartialYear(lowerYear, yearPartIx + 1);\n    const upperBound = getPartialYear(upperYear, yearPartIx + 1);\n\n    return Array(10)\n      .fill(0)\n      .map((i, ix) => {\n        let opt = { ...base };\n        opt[key] = i + ix;\n        return opt;\n      })\n      .filter((opt) => {\n        const partialYear = getPartialYear(opt, yearPartIx + 1);\n        return partialYear >= lowerBound && partialYear <= upperBound;\n      });\n  }\n\n  let yearOpts = getOptsForYearPart(keyIx);\n  if (yearOpts.length === 1 && keyIx < 3) {\n    // skip this level if there's only one option\n    base = { ...yearOpts[0] };\n    yearOpts = getOptsForYearPart(keyIx + 1);\n  }\n  if (yearDefined.value) {\n    yearOpts.push(clear);\n  }\n  return yearOpts;\n});\n\nconst leapYear = computed(() => {\n  // in the gregorian calendar, assuming that most/all dates are going to be\n  // post 1582 and probably UK-based\n  if (year.value % 100 === 0) {\n    return year.value % 400 === 0;\n  }\n  return year.value % 4 === 0;\n});\n\nfunction formatYear(yrParts) {\n  if (Object.values(yrParts).every((p) => p == null)) {\n    return 'clear';\n  }\n  return _yearPartKeys\n    .map((x) => {\n      return yrParts[x] || 0;\n    })\n    .join('');\n}\n\nfunction getPartialYear(yrParts, digitCount) {\n  return _yearPartKeys.slice(0, digitCount).reduce((p, c, ix) => {\n    let v = yrParts[c] || 0;\n    return p + v * 10 ** (3 - ix);\n  }, 0);\n}\n\nfunction yearToParts(yr) {\n  return {\n    millenium: Math.floor(yr / 1000),\n    century: Math.floor((yr % 1000) / 100),\n    decade: Math.floor((yr % 100) / 10),\n    year: Math.floor(yr % 10),\n  };\n}\n\nfunction setYear(opt) {\n  yearParts.value = opt;\n  const lastDefined = Math.max(\n    ..._yearPartKeys.map((k, ix) =>\n      isNaN(parseInt(yearParts.value[k])) ? -1 : ix,\n    ),\n  );\n  if (lastDefined === 3) {\n    let valid = validate(year.value, month.value, day.value);\n    if (!valid.month || !valid.day) {\n      month.value = null;\n      day.value = null;\n    }\n  }\n}\n\n// MONTH\nconst _month = ref(null);\nconst month = computed({\n  get() {\n    const valid = validate(year.value, _month.value, day.value);\n    return valid.month ? _month.value : null;\n  },\n  set(v) {\n    _month.value = isNaN(parseInt(v)) ? null : v;\n    if (day.value && day.value > monthDays.value) {\n      day.value = monthDays.value;\n    }\n  },\n});\n\nconst monthOptions = computed(() => {\n  let options = datenames.abbreviated_months.map((m, ix) => [m, ix + 1]);\n  const yr = year.value\n    ? year.value\n    : minDate.value.year === maxDate.value.year\n    ? minDate.value.year\n    : null;\n  if (yr === minDate.value.year) {\n    options = options.slice(minDate.value.month - 1, options.length);\n  }\n  if (yr === maxDate.value.year) {\n    const rem = 12 - options.length;\n    options = options.slice(0, maxDate.value.month - rem);\n  }\n  if (_month.value) {\n    options.push(['clear', null]);\n  }\n  return options;\n});\n\nconst monthDays = computed(() => {\n  return getMonthDays(month.value);\n});\n\nfunction getMonthDays(monthIx1) {\n  // monthIx1 is 1-based index of month, i.e. jan is 1 and dec is 12\n  const thirty = [4, 6, 9, 11];\n  if (thirty.includes(monthIx1)) {\n    return 30;\n  }\n  if (monthIx1 === 2) {\n    return leapYear.value ? 29 : 28;\n  }\n  return 31;\n}\n\n// DAY\nconst _day = ref(null);\nconst day = computed({\n  get() {\n    const valid = validate(year.value, _month.value, _day.value);\n    return valid.month && valid.day ? _day.value : null;\n  },\n  set(v) {\n    _day.value = isNaN(parseInt(v)) ? null : v;\n  },\n});\n\nconst dayOptions = computed(() => {\n  const yr = year.value\n    ? year.value\n    : minDate.value.year === maxDate.value.year\n    ? minDate.value.year\n    : null;\n  const mnth = month.value\n    ? month.value\n    : minDate.value.year === maxDate.value.year &&\n      minDate.value.month === maxDate.value.month\n    ? minDate.value.month\n    : null;\n  const mnthDays = getMonthDays(mnth);\n\n  let options = Array(mnthDays)\n    .fill(1)\n    .map((_, ix) => ix + 1);\n\n  if (\n    yr === minDate.value.year &&\n    !isNaN(parseInt(mnth)) &&\n    mnth <= minDate.value.month\n  ) {\n    options = options.slice(minDate.value.day - 1);\n  }\n  if (\n    yr === maxDate.value.year &&\n    !isNaN(parseInt(mnth)) &&\n    mnth >= maxDate.value.month\n  ) {\n    const rem = mnthDays - options.length;\n    options = options.slice(0, maxDate.value.day - rem);\n  }\n  if (_day.value) {\n    options.push(null);\n  }\n  return options;\n});\n\n// UTILS\nfunction formatDate(y, m, d) {\n  const mName = datenames.abbreviated_months[m - 1];\n\n  if (y && m && d) {\n    return `${d} ${mName} ${y}`;\n  }\n  if (y && m) {\n    return `${mName} ${y}`;\n  }\n  if (y && d) {\n    return `${d} ??? ${y}`;\n  }\n  if (m && d) {\n    return `${d} ${mName}`;\n  }\n  if (y) {\n    return y;\n  }\n  if (m) {\n    return mName;\n  }\n  if (d) {\n    return `day ${d}`;\n  }\n  return null;\n}\n\n// this has to go at the end; refreshes the display in the box when the main date changes\nwatch(returnDate, () => {\n  refreshDisplay();\n  valueChanged(returnDate.value);\n});\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n\n.inputWrapper {\n  position: relative;\n}\n\n.datePopup {\n  position: absolute;\n  min-width: 250px;\n  max-width: 380px;\n  background: white;\n  border: 1px solid $grey;\n  border-radius: $rounding;\n  top: 100%;\n  left: 0;\n  margin-top: $v-pad;\n  padding: $padding;\n  z-index: 9999;\n}\n\n.popupSection {\n  display: grid;\n  align-items: start;\n  gap: 1em 2em;\n  padding: $v-pad $h-pad 1em;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid $grey;\n  }\n}\n\n.yearGrid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 5px;\n}\n\n.monthGrid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 5px;\n}\n\n.dayGrid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 5px;\n}\n\n.editing {\n  font-style: italic;\n  color: #444;\n}\n\n.suggestion {\n  cursor: pointer;\n  text-decoration: underline;\n}\n\n.dateRange {\n  width: 100%;\n  text-align: center;\n}\n\n.yearParts {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 5px;\n\n  // thanks w3 schools\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n}\n</style>\n","<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <input\n      type=\"date\"\n      :placeholder=\"placeholder\"\n      :min=\"min\"\n      :max=\"max\"\n      :step=\"step\"\n      :id=\"inputId\"\n      :class=\"$style.input\"\n      v-model=\"value\"\n      ref=\"target\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { useChangeEmits } from '../common.js';\nimport { inject, ref } from 'vue';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: Object,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * Text to display in the blank input.\n   */\n  placeholder: {\n    type: String,\n    default: null,\n  },\n  /**\n   * The earliest accepted date, in yyyy-mm-dd format.\n   */\n  min: {\n    type: String,\n    default: null,\n  },\n  /**\n   * The latest accepted date, in yyyy-mm-dd format.\n   */\n  max: {\n    type: String,\n    default: null,\n  },\n  /**\n   * The increment size (in days) from the minimum date; e.g. 2 would make every other day valid. `'any'` allows all values.\n   */\n  step: {\n    type: [String, Number],\n    default: 'any',\n  },\n});\n\nconst inputId = inject('inputId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {string} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { value } = useChangeEmits(emit, props);\n\n// ELEMENTS\nconst target = ref(null);\n\n// EXPOSE\ndefineExpose({\n  target,\n});\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n\n.input:invalid {\n  border-color: $error-dark;\n}\n</style>\n","<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <select :id=\"inputId\" :class=\"$style.input\" v-model=\"value\" ref=\"target\">\n      <option :value=\"null\">{{ placeholder }}</option>\n      <option v-for=\"opt in dropdownOptions\" :value=\"opt.value\">\n        {{ opt.label }}\n      </option>\n    </select>\n    <font-awesome-icon icon=\"fa-solid fa-caret-down\" :class=\"$style.arrow\" />\n  </div>\n</template>\n\n<script setup>\nimport { computed, inject, ref } from 'vue';\nimport FontAwesomeIcon from '../../../icons.js';\nimport { useChangeEmits } from '../common.js';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: String,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 0,\n  },\n  /**\n   * Text to display in the blank input.\n   */\n  placeholder: {\n    type: String,\n    default: 'Please choose an option',\n  },\n  /**\n   * The options available to select. Each item can be a string, or an object with `label` and `value` keys.\n   */\n  options: {\n    type: Array,\n  },\n});\n\nconst inputId = inject('inputId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst dropdownOptions = computed(() => {\n  let outputOptions = [];\n  props.options.forEach((o) => {\n    if (typeof o === 'object') {\n      outputOptions.push({\n        label: o.label || o.value,\n        value: o.value || o.label,\n        order: o.order || null,\n      });\n    } else {\n      outputOptions.push({ label: o, value: o });\n    }\n  });\n  outputOptions.sort((a, b) => {\n    let orderSort = 0;\n    if (a.order || b.order) {\n      orderSort = a.order && b.order ? a.order - b.order : a.order ? 1 : -1;\n    }\n\n    let labelSort = a.label.localeCompare(b.label);\n\n    return orderSort !== 0 ? orderSort : labelSort;\n  });\n  return outputOptions;\n});\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {string} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { value } = useChangeEmits(emit, props);\n\n// ELEMENTS\nconst target = ref(null);\n\n// EXPOSE\ndefineExpose({\n  target,\n});\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n\n.input {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 100%;\n  cursor: pointer;\n}\n\n.inputWrapper {\n  position: relative;\n\n  & > .arrow {\n    position: absolute;\n    top: 0;\n    right: 1em;\n    bottom: 0;\n    margin: auto;\n    padding-left: 1em;\n    pointer-events: none;\n    cursor: pointer;\n  }\n}\n</style>\n","function * searchExact (needle, haystack, startIndex = 0, endIndex = null) {\n  const needleLen = needle.length\n  if (needleLen === 0) return\n\n  if (endIndex === null) {\n    endIndex = haystack.length\n  }\n  let index\n\n  while ((index = haystack.indexOf(needle, startIndex)) > -1) {\n    if (index + needle.length > endIndex) break\n    yield index\n    startIndex = index + 1\n  }\n}\n\nfunction reverse (string) {\n  return string\n    .split('')\n    .reverse()\n    .join('')\n}\n\nmodule.exports = {\n  searchExact,\n  reverse\n}\n","const { searchExact, reverse } = require('./utils')\n\nfunction isEditDistanceNoGreaterThan (a, b, maxDist) {\n  if (a.length > b.length) {\n    [a, b] = [b, a]\n  }\n  const lenDelta = b.length - a.length\n  if (lenDelta > maxDist) {\n    return false\n  }\n\n  if (maxDist === 0) {\n    return a === b\n  }\n\n  let firstDiffIdx\n  for (firstDiffIdx = 0; firstDiffIdx < a.length; firstDiffIdx++) {\n    if (a[firstDiffIdx] !== b[firstDiffIdx]) break\n  }\n  if (firstDiffIdx === a.length) {\n    return lenDelta <= maxDist\n  }\n\n  let lastDiffIdx\n  for (lastDiffIdx = a.length - 1; lastDiffIdx >= 0; lastDiffIdx--) {\n    if (a[lastDiffIdx] !== b[lastDiffIdx + lenDelta]) break\n  }\n\n  a = a.slice(firstDiffIdx, lastDiffIdx + 1)\n  b = b.slice(firstDiffIdx, lastDiffIdx + 1 + lenDelta)\n\n  const [dist, length] = _expand(a, b, maxDist)\n  return dist + (b.length - length) <= maxDist\n}\n\nfunction editDistance (a, b) {\n  if (a.length > b.length) {\n    [a, b] = [b, a]\n  }\n  const scores = new Array(a.length + 1)\n  for (let i = 0; i <= a.length; i++) {\n    scores[i] = i\n  }\n\n  let _prevScore\n  let prevScore\n  for (let i = 0; i < b.length; i++) {\n    scores[0] = i + 1\n    prevScore = i\n    for (let k = 0; k < a.length; k++) {\n      _prevScore = scores[k + 1]\n      scores[k + 1] = Math.min(\n        prevScore + +(a[k] !== b[i]),\n        scores[k] + 1,\n        scores[k + 1] + 1\n      )\n      prevScore = _prevScore\n    }\n  }\n\n  return scores[a.length]\n}\n\nfunction makeChar2needleIdx (needle, maxDist) {\n  const res = {}\n  for (let i = Math.min(needle.length - 1, maxDist); i >= 0; i--) {\n    res[needle[i]] = i\n  }\n  return res\n}\n\nfunction * fuzzySearch (needle, haystack, maxDist) {\n  if (needle.length > haystack.length + maxDist) return\n\n  const ngramLen = Math.floor(needle.length / (maxDist + 1))\n\n  if (maxDist === 0) {\n    for (const index of searchExact(needle, haystack)) {\n      yield {\n        start: index,\n        end: index + needle.length,\n        dist: 0\n      }\n    }\n  } else if (ngramLen >= 10) {\n    yield * fuzzySearchNgrams(needle, haystack, maxDist)\n  } else {\n    yield * fuzzySearchCandidates(needle, haystack, maxDist)\n  }\n}\n\nfunction _expand (needle, haystack, maxDist) {\n  maxDist = +maxDist\n\n  let firstDiff\n  for (firstDiff = 0; firstDiff < Math.min(needle.length, haystack.length); firstDiff++) {\n    if (needle.charCodeAt(firstDiff) !== haystack.charCodeAt(firstDiff)) break\n  }\n  if (firstDiff) {\n    needle = needle.slice(firstDiff)\n    haystack = haystack.slice(firstDiff)\n  }\n\n  if (!needle) {\n    return [0, firstDiff]\n  } else if (!haystack) {\n    if (needle.length <= maxDist) {\n      return [needle.length, firstDiff]\n    } else {\n      return [null, null]\n    }\n  }\n\n  if (maxDist === 0) return [null, null]\n\n  let scores = new Array(needle.length + 1)\n  for (let i = 0; i <= maxDist; i++) {\n    scores[i] = i\n  }\n  let newScores = new Array(needle.length + 1)\n\n  let minScore = null\n  let minScoreIdx = null\n  let maxGoodScore = maxDist\n  let firstGoodScoreIdx = 0\n  let lastGoodScoreIdx = needle.length - 1\n\n  for (let haystackIdx = 0; haystackIdx < haystack.length; haystackIdx++) {\n    const char = haystack.charCodeAt(haystackIdx)\n\n    const needleIdxStart = Math.max(0, firstGoodScoreIdx - 1)\n    const needleIdxLimit = Math.min(\n      haystackIdx + maxDist,\n      needle.length - 1,\n      lastGoodScoreIdx\n    )\n\n    newScores[0] = scores[0] + 1\n    firstGoodScoreIdx = newScores[0] <= maxGoodScore ? 0 : null\n    lastGoodScoreIdx = newScores[0] <= maxGoodScore ? 0 : -1\n\n    let needleIdx\n    for (needleIdx = needleIdxStart; needleIdx < needleIdxLimit; needleIdx++) {\n      const score = newScores[needleIdx + 1] = Math.min(\n        scores[needleIdx] + +(char !== needle.charCodeAt(needleIdx)),\n        scores[needleIdx + 1] + 1,\n        newScores[needleIdx] + 1\n      )\n      if (score <= maxGoodScore) {\n        if (firstGoodScoreIdx === null) firstGoodScoreIdx = needleIdx + 1\n        lastGoodScoreIdx = Math.max(\n          lastGoodScoreIdx,\n          needleIdx + 1 + (maxGoodScore - score)\n        )\n      }\n    }\n\n    const lastScore = newScores[needleIdx + 1] = Math.min(\n      scores[needleIdx] + +(char !== needle.charCodeAt(needleIdx)),\n      newScores[needleIdx] + 1\n    )\n    if (lastScore <= maxGoodScore) {\n      if (firstGoodScoreIdx === null) firstGoodScoreIdx = needleIdx + 1\n      lastGoodScoreIdx = needleIdx + 1\n    }\n\n    if (\n      needleIdx === needle.length - 1 &&\n      (minScore === null || lastScore <= minScore)\n    ) {\n      minScore = lastScore\n      minScoreIdx = haystackIdx\n      if (minScore < maxGoodScore) maxGoodScore = minScore\n    }\n\n    [scores, newScores] = [newScores, scores]\n\n    if (firstGoodScoreIdx === null) break\n  }\n\n  if (minScore !== null && minScore <= maxDist) {\n    return [minScore, minScoreIdx + 1 + firstDiff]\n  } else {\n    return [null, null]\n  }\n}\n\nfunction * fuzzySearchNgrams (needle, haystack, maxDist) {\n  // use n-gram search\n  const ngramLen = Math.floor(needle.length / (maxDist + 1))\n  const needleLen = needle.length\n  const haystackLen = haystack.length\n  for (let ngramStartIdx = 0;\n    ngramStartIdx <= needle.length - ngramLen;\n    ngramStartIdx += ngramLen\n  ) {\n    const ngram = needle.slice(ngramStartIdx, ngramStartIdx + ngramLen)\n\n    const ngramEnd = ngramStartIdx + ngramLen\n    const needleBeforeReversed = reverse(needle.slice(0, ngramStartIdx))\n    const needleAfter = needle.slice(ngramEnd)\n    const startIdx = Math.max(0, ngramStartIdx - maxDist)\n    const endIdx = Math.min(haystackLen, haystackLen - needleLen + ngramEnd + maxDist)\n\n    for (const haystackMatchIdx of searchExact(ngram, haystack, startIdx, endIdx)) {\n      // try to expand left\n      const [distRight, rightExpandSize] = _expand(\n        needleAfter,\n        haystack.slice(\n          haystackMatchIdx + ngramLen,\n          haystackMatchIdx - ngramStartIdx + needleLen + maxDist\n        ),\n        maxDist\n      )\n      if (distRight === null) continue\n\n      const [distLeft, leftExpandSize] = _expand(\n        needleBeforeReversed,\n        reverse(haystack.slice(\n          Math.max(0, haystackMatchIdx - ngramStartIdx - (maxDist - distRight)),\n          haystackMatchIdx\n        )),\n        maxDist - distRight\n      )\n      if (distLeft === null) continue\n\n      yield {\n        start: haystackMatchIdx - leftExpandSize,\n        end: haystackMatchIdx + ngramLen + rightExpandSize,\n        dist: distLeft + distRight\n      }\n    }\n  }\n}\n\nfunction * fuzzySearchCandidates (needle, haystack, maxDist) {\n  const debugFlag = false\n  if (debugFlag) console.log(`fuzzySearchCandidates(${needle}, ${haystack}, ${maxDist})`)\n\n  // prepare some often used things in advance\n  const needleLen = needle.length\n  const haystackLen = haystack.length\n  if (needleLen > haystackLen + maxDist) return\n  const char2needleIdx = makeChar2needleIdx(needle, maxDist)\n\n  let prevCandidates = [] // candidates from the last iteration\n  let candidates = [] // new candidates from the current iteration\n\n  // iterate over the chars in the haystack, updating the candidates for each\n  for (let i = 0; i < haystack.length; i++) {\n    const haystackChar = haystack[i]\n\n    prevCandidates = candidates\n    candidates = []\n\n    const needleIdx = char2needleIdx[haystackChar]\n    if (needleIdx !== undefined) {\n      if (needleIdx + 1 === needleLen) {\n        if (debugFlag) {\n          console.log(`yield ${{\n            start: i,\n            end: i + 1,\n            dist: needleIdx\n          }}`)\n        }\n        yield {\n          start: i,\n          end: i + 1,\n          dist: needleIdx\n        }\n      } else {\n        candidates.push({\n          startIdx: i,\n          needleIdx: needleIdx + 1,\n          dist: needleIdx\n        })\n      }\n    }\n\n    for (const candidate of prevCandidates) {\n      // if this sequence char is the candidate's next expected char\n      if (needle[candidate.needleIdx] === haystackChar) {\n        // if reached the end of the needle, return a match\n        if (candidate.needleIdx + 1 === needleLen) {\n          if (debugFlag) {\n            console.log(`yield ${{\n              start: candidate.startIdx,\n              end: i + 1,\n              dist: candidate.dist\n            }}`)\n          }\n          yield {\n            start: candidate.startIdx,\n            end: i + 1,\n            dist: candidate.dist\n          }\n        } else {\n          // otherwise, update the candidate's needleIdx and keep it\n          candidates.push({\n            startIdx: candidate.startIdx,\n            needleIdx: candidate.needleIdx + 1,\n            dist: candidate.dist\n          })\n        }\n      } else {\n        if (candidate.dist === maxDist) continue\n\n        candidates.push({\n          startIdx: candidate.startIdx,\n          needleIdx: candidate.needleIdx,\n          dist: candidate.dist + 1\n        })\n\n        for (let nSkipped = 1; nSkipped <= maxDist - candidate.dist; nSkipped++) {\n          if (candidate.needleIdx + nSkipped === needleLen) {\n            if (debugFlag) {\n              console.log(`yield ${{\n                start: candidate.startIdx,\n                end: i + 1,\n                dist: candidate.dist + nSkipped\n              }}`)\n            }\n            yield {\n              start: candidate.startIdx,\n              end: i + 1,\n              dist: candidate.dist + nSkipped\n            }\n            break\n          } else if (needle[candidate.needleIdx + nSkipped] === haystackChar) {\n            if (candidate.needleIdx + nSkipped + 1 === needleLen) {\n              if (debugFlag) {\n                console.log(`yield ${{\n                  start: candidate.startIdx,\n                  end: i + 1,\n                  dist: candidate.dist + nSkipped\n                }}`)\n              }\n              yield {\n                start: candidate.startIdx,\n                end: i + 1,\n                dist: candidate.dist + nSkipped\n              }\n            } else {\n              candidates.push({\n                startIdx: candidate.startIdx,\n                needleIdx: candidate.needleIdx + 1 + nSkipped,\n                dist: candidate.dist + nSkipped\n              })\n            }\n            break\n          }\n        }\n\n        if (i + 1 < haystackLen && candidate.needleIdx + 1 < needleLen) {\n          candidates.push({\n            startIdx: candidate.startIdx,\n            needleIdx: candidate.needleIdx + 1,\n            dist: candidate.dist + 1\n          })\n        }\n      }\n    }\n\n    if (debugFlag) console.log(candidates)\n  }\n\n  for (const candidate of candidates) {\n    candidate.dist += needle.length - candidate.needleIdx\n    if (candidate.dist <= maxDist) {\n      yield {\n        start: candidate.startIdx,\n        end: haystack.length,\n        dist: candidate.dist\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  _expand,\n  editDistance,\n  fuzzySearch,\n  fuzzySearchNgrams,\n  fuzzySearchCandidates,\n  isEditDistanceNoGreaterThan\n}\n","const { editDistance, fuzzySearch, isEditDistanceNoGreaterThan } =\n  require('./levenshtein-search')\n\nmodule.exports = {\n  editDistance,\n  fuzzySearch,\n  isEditDistanceNoGreaterThan\n}\n","<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    ref=\"container\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <div :class=\"$style.textboxWrapper\">\n      <input\n        type=\"text\"\n        :placeholder=\"placeholder\"\n        :id=\"inputId\"\n        :class=\"$style.input\"\n        v-model=\"search\"\n        v-show=\"focused\"\n        ref=\"textbox\"\n      />\n      <div\n        :class=\"$style.input\"\n        tabindex=\"0\"\n        v-show=\"!focused\"\n        @focusin=\"startFocus\"\n      >\n        {{ value ? value.length : 0 }} {{ itemString }} selected\n      </div>\n      <font-awesome-icon\n        icon=\"fa-solid fa-caret-down\"\n        :class=\"$style.arrow\"\n        @click=\"toggleFocus\"\n      />\n    </div>\n    <div :class=\"$style.options\" v-if=\"focused\" ref=\"dropdown\">\n      <ul v-if=\"allOptions.length > 0\" :class=\"$style.optlist\">\n        <li\n          title=\"Select all\"\n          :class=\"[$style.selectAll, $style.listItem, $style.option]\"\n          :style=\"{ height: `${itemHeight}px` }\"\n        >\n          <zoa-input\n            zoa-type=\"checkbox\"\n            label=\"Select all\"\n            label-position=\"right\"\n            v-model=\"selectAll\"\n          />\n        </li>\n        <li\n          title=\"Select results\"\n          :class=\"[$style.selectAll, $style.listItem, $style.option]\"\n          :style=\"{ height: `${itemHeight}px` }\"\n          v-if=\"!!_search\"\n        >\n          <zoa-input\n            zoa-type=\"checkbox\"\n            label=\"Select results\"\n            label-position=\"right\"\n            v-model=\"selectFiltered\"\n          />\n        </li>\n        <li\n          v-for=\"item in filteredItems\"\n          :title=\"item.label\"\n          :class=\"[\n            $style.listItem,\n            item.kind === 'group' ? $style.subgroup : $style.option,\n          ]\"\n          :style=\"{ height: `${itemHeight}px` }\"\n        >\n          <div @click=\"selectGroup(item.group)\" v-if=\"item.kind === 'group'\">\n            {{ item.label }}\n          </div>\n          <div v-else>\n            <zoa-input\n              zoa-type=\"checkbox\"\n              :label=\"item.label\"\n              label-position=\"right\"\n              :options=\"{ checkValue: item.value, name: subId('checkboxes') }\"\n              v-model=\"value\"\n              v-if=\"item.ix >= lowerVisible && item.ix <= upperVisible\"\n            />\n          </div>\n        </li>\n      </ul>\n      <div :class=\"$style.noOptions\" v-else>No options found</div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { useChangeEmits } from '../common.js';\nimport { computed, inject, ref } from 'vue';\nimport {\n  onClickOutside,\n  onKeyStroke,\n  useFocusWithin,\n  useFocus,\n  useScroll,\n} from '@vueuse/core';\nimport FontAwesomeIcon from '../../../icons.js';\nimport { ZoaInput } from '../../index.js';\nimport { debounce } from 'dettle';\nimport { fuzzySearch } from 'levenshtein-search';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: Array,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 0,\n  },\n  /**\n   * Text to display in the blank input.\n   */\n  placeholder: {\n    type: [String, undefined],\n    default: null,\n  },\n  /**\n   * The options available to select. Each item can be a string, or an object with `label` and `value` keys.\n   */\n  options: {\n    type: Array,\n  },\n  /**\n   * The string used to describe the items being selected, in singular form e.g. \"resource\", \"genus\".\n   */\n  itemName: {\n    type: String,\n    default: 'item',\n  },\n  /**\n   * The plural form of itemName, e.g. \"resources\", \"genera\". If null (default), an \"s\" will be added to itemName.\n   */\n  itemNamePlural: {\n    type: [String, null],\n    default: null,\n  },\n  /**\n   * Debounce delay for the `search` event, in ms.\n   */\n  searchDelay: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * Enables an internal list filtering based on the search value. Disable if implementing an external filter using the emit.\n   */\n  enableSearch: {\n    type: Boolean,\n    default: false,\n  },\n  /**\n   * Override the height (in px) of each list item. May be necessary if font family or size is changed from the default.\n   */\n  itemHeight: {\n    type: Number,\n    default: 38,\n  },\n});\n\nconst inputId = inject('inputId');\nconst subId = inject('subId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {string} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n  /**\n   * Emitted when the search value changes; debounced if the searchDelay prop is > 0.\n   * @arg {string} searchTerm the search term\n   */\n  'search',\n]);\nconst { value } = useChangeEmits(emit, props);\nif (!Array.isArray(value)) {\n  // needs to be initialised as an array or the checkboxes will all select as\n  // one, but returning an empty array as the default prop breaks reactivity\n  value.value = [];\n}\n\n// SEARCH\nconst _search = ref(null);\nconst emitSearch = debounce((searchTerm) => {\n  emit('search', searchTerm);\n}, props.searchDelay);\nconst updateSearch = debounce((searchTerm) => {\n  _search.value = searchTerm;\n}, props.searchDelay);\nconst search = computed({\n  get() {\n    return _search.value;\n  },\n  set(searchTerm) {\n    updateSearch(searchTerm);\n    emitSearch(searchTerm);\n  },\n});\n\n// PROP PROCESSING\nconst itemString = computed(() => {\n  const isPlural = value.value ? value.value.length !== 1 : true;\n  if (isPlural) {\n    return props.itemNamePlural || props.itemName + 's';\n  }\n  return props.itemName;\n});\n\nconst allOptions = computed(() => {\n  let outputOptions = [];\n  props.options.forEach((o) => {\n    if (typeof o === 'object') {\n      outputOptions.push({\n        label: o.label || o.value,\n        value: o.value || o.label,\n        group: o.group || null,\n        order: o.order || null,\n      });\n    } else {\n      outputOptions.push({ label: o, value: o, group: null });\n    }\n  });\n  outputOptions.sort((a, b) => {\n    let groupSort;\n    if (a.group === b.group) {\n      groupSort = 0;\n    } else if (!a.group || !b.group) {\n      groupSort = !a.group ? -1 : 1;\n    } else {\n      groupSort = a.group.localeCompare(b.group);\n    }\n\n    let orderSort = 0;\n    if (a.order || b.order) {\n      orderSort = a.order && b.order ? a.order - b.order : a.order ? 1 : -1;\n    }\n\n    let labelSort = a.label.localeCompare(b.label);\n\n    return groupSort !== 0\n      ? groupSort\n      : orderSort !== 0\n      ? orderSort\n      : labelSort;\n  });\n  return outputOptions;\n});\n\nconst filteredItems = computed(() => {\n  const doSearch = props.enableSearch && search.value;\n  const searchString = doSearch ? search.value.toLowerCase() : null;\n  const checkMatch = (txt) => {\n    return txt\n      ? [...fuzzySearch(searchString, txt.toLowerCase(), 1)].length > 0\n      : false;\n  };\n\n  let filteredOptions;\n  if (doSearch) {\n    filteredOptions = allOptions.value.filter((o) => {\n      return checkMatch(o.group) || checkMatch(o.label) || checkMatch(o.value);\n    });\n  } else {\n    filteredOptions = allOptions.value;\n  }\n\n  let items = [];\n  let grouped = Object.entries(\n    Object.groupBy(filteredOptions, ({ group }) => group),\n  );\n  let ix = searchString ? 2 : 1; // skip the multiselect checkboxes\n  grouped.forEach((g) => {\n    let groupName = g[0];\n    let groupOptions = g[1];\n    if (groupName && groupName !== 'null') {\n      items.push({\n        ix: ix,\n        kind: 'group',\n        label: groupName,\n        value: groupName,\n        group: groupName,\n      });\n      ix += 1;\n    }\n    items = items.concat(\n      groupOptions.map((o, i) => {\n        return {\n          ix: ix + i,\n          kind: 'option',\n          label: o.label,\n          value: o.value,\n          group: o.group,\n        };\n      }),\n    );\n    ix += groupOptions.length;\n  });\n  return items;\n});\n\n// ELEMENTS\nconst container = ref(null);\nconst textbox = ref(null);\nconst dropdown = ref(null);\n\n// EXPOSE\ndefineExpose({\n  target: textbox,\n});\n\n// SCROLLING\nconst { y } = useScroll(dropdown);\nconst scrollY = computed(() => {\n  // y from useScroll doesn't reset when the dropdown element is reloaded until\n  // the user starts scrolling, which is obviously not ideal. Using scrollTop\n  // alone/directly doesn't update quickly/often enough, so we have to combine.\n  if (\n    !dropdown.value ||\n    (dropdown.value && y.value !== dropdown.value.scrollTop)\n  ) {\n    return 0;\n  }\n  return y.value;\n});\nconst buffer = 10; // how many items either side of the visible items should be loaded\nconst dropdownHeight = computed(() => {\n  try {\n    return dropdown.value.clientHeight;\n  } catch {\n    return 500;\n  }\n});\nconst lowerVisible = computed(() => {\n  if (filteredItems.value.length < buffer * 2) {\n    return 0;\n  }\n  // doesn't matter if it's < n options\n  return Math.floor(scrollY.value / props.itemHeight) - buffer;\n});\nconst upperVisible = computed(() => {\n  if (filteredItems.value.length < buffer * 2) {\n    return filteredItems.value.length + buffer;\n  }\n  // doesn't matter if it's > n options\n  return Math.ceil((scrollY.value + dropdownHeight.value) / props.itemHeight);\n});\n\n// FOCUS\nconst focused = ref(false);\nconst textboxFocus = useFocus(textbox);\nconst dropdownFocus = useFocusWithin(dropdown);\n\nfunction startFocus() {\n  focused.value = true;\n  setTimeout(() => {\n    textbox.value.focus();\n  }, 50);\n}\n\nfunction unfocus() {\n  try {\n    container.value.blur();\n    textbox.value.blur();\n    dropdown.value.blur();\n  } catch {\n    // doesn't really matter\n  }\n  focused.value = false;\n}\n\nfunction toggleFocus() {\n  focused.value ? unfocus() : startFocus();\n}\n\nonClickOutside(container, () => {\n  unfocus();\n});\n\n// KEYBINDINGS\nonKeyStroke('ArrowDown', () => {\n  if (allOptions.value.length === 0) {\n    return;\n  }\n  if (textboxFocus.focused.value) {\n    dropdown.value.children[0].children[0].children[0].focus();\n  } else if (dropdownFocus.focused.value) {\n    const labels = [...dropdown.value.querySelectorAll('label')];\n    const selectedElement = dropdown.value.querySelector('label:focus');\n    if (!selectedElement) {\n      labels[0].focus();\n    } else {\n      const ix = labels.findIndex((lbl) => lbl === selectedElement);\n      if (ix === labels.length - 1) {\n        labels[0].focus();\n      } else {\n        labels[ix + 1].focus();\n      }\n    }\n  }\n});\n\nonKeyStroke('ArrowUp', () => {\n  if (allOptions.value.length === 0) {\n    return;\n  }\n  if (dropdownFocus.focused.value) {\n    const labels = [...dropdown.value.querySelectorAll('label')];\n    const selectedElement = dropdown.value.querySelector('label:focus');\n    if (!selectedElement) {\n      textbox.value.focus();\n    } else {\n      const ix = labels.findIndex((lbl) => lbl === selectedElement);\n      if (ix === 0) {\n        textbox.value.focus();\n      } else {\n        labels[ix - 1].focus();\n      }\n    }\n  }\n});\n\nonKeyStroke('Enter', () => {\n  unfocus();\n});\n\n// select/deselect multiple checkboxes at once\n/**\n * On checking, selects all options (the full unfiltered list).\n */\nconst selectAll = computed({\n  get() {\n    const options = allOptions.value;\n    if (value.value == null || value.value.length !== options.length) {\n      return false;\n    }\n    const unchecked = options.filter((o) => !value.value.includes(o.value));\n    return unchecked.length === 0;\n  },\n  set(toggleValue) {\n    if (toggleValue) {\n      value.value = allOptions.value.map((o) => o.value);\n    } else {\n      value.value = [];\n    }\n  },\n});\n\n/**\n * On checking, selects all FILTERED options.\n */\nconst selectFiltered = computed({\n  get() {\n    let options = filteredItems.value\n      .filter((i) => i.kind === 'option')\n      .map((o) => o.value);\n    if (value.value == null || value.value.length < options.length) {\n      return false;\n    }\n    const unchecked = options.filter((o) => !value.value.includes(o));\n    return unchecked.length === 0;\n  },\n  set(toggleValue) {\n    let options = filteredItems.value\n      .filter((i) => i.kind === 'option')\n      .map((o) => o.value);\n    const checked = value.value ? value.value : [];\n    const unchecked = options.filter((o) => !checked.includes(o));\n    if (toggleValue) {\n      value.value = checked.concat(unchecked);\n    } else {\n      value.value = checked.filter((o) => !options.includes(o));\n    }\n  },\n});\n\n/**\n * Selects all FILTERED group options.\n * @param groupName\n */\nfunction selectGroup(groupName) {\n  const group = filteredItems.value\n    .filter((o) => o.kind === 'option' && o.group === groupName)\n    .map((o) => o.value);\n  value.value = value.value ? value.value : []; // double check it's not null\n  const unchecked = group.filter((o) => !value.value.includes(o));\n  if (unchecked.length > 0) {\n    unchecked.forEach((o) => {\n      value.value.push(o);\n    });\n  } else {\n    value.value = value.value.filter((o) => !group.includes(o));\n  }\n}\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n\n.inputWrapper {\n  position: relative;\n}\n\n.options {\n  position: absolute;\n  background: white;\n  border: 1px solid $grey;\n  border-radius: $rounding;\n  width: 100%;\n  margin-top: 2px;\n  font-size: 0.9em;\n  max-height: 500px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  z-index: 9999;\n}\n\nul.optlist {\n  padding: 0;\n  margin: 0;\n  list-style: none;\n}\n\n.listItem {\n  &:first-child {\n    border-radius: $rounding $rounding 0 0;\n  }\n\n  &:last-child {\n    border-radius: 0 0 $rounding $rounding;\n  }\n\n  & > * {\n    padding: $padding;\n  }\n\n  &.option {\n    &:not(.selectAll) > * {\n      &:hover,\n      &:focus {\n        background: $secondary;\n      }\n    }\n\n    & label {\n      height: 100%;\n    }\n  }\n\n  &.option label > span:first-child,\n  &.subgroup > div {\n    width: 100%;\n    overflow-x: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n.selectAll + .option:not(.selectAll) {\n  border-top: 2px solid $primary;\n}\n\n.subgroup {\n  border-top: 2px solid $primary;\n\n  & > .optlist label {\n    padding-left: calc($h-pad * 2);\n  }\n}\n\n.selectAll > *,\n.subgroup > *:first-child {\n  &:hover,\n  &:focus {\n    background: $primary;\n  }\n}\n\n.noOptions {\n  font-size: 0.8em;\n  font-style: italic;\n  padding: $padding;\n  opacity: 0.8;\n}\n\n.textboxWrapper {\n  position: relative;\n\n  & > .arrow {\n    position: absolute;\n    top: 0;\n    right: 1em;\n    bottom: 0;\n    margin: auto;\n    padding-left: 1em;\n    cursor: pointer;\n  }\n}\n</style>\n","<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <input\n      type=\"number\"\n      :placeholder=\"placeholder\"\n      :min=\"min\"\n      :max=\"max\"\n      :step=\"step\"\n      :id=\"inputId\"\n      :class=\"$style.input\"\n      v-model=\"value\"\n      ref=\"target\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { useChangeEmits } from '../common.js';\nimport { inject, ref } from 'vue';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: Number,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * Text to display in the blank input.\n   */\n  placeholder: {\n    type: Number,\n    default: 0,\n  },\n  /**\n   * The lowest valid number.\n   */\n  min: {\n    type: Number,\n    default: null,\n  },\n  /**\n   * The highest valid number.\n   */\n  max: {\n    type: Number,\n    default: null,\n  },\n  /**\n   * The granularity of accepted values; e.g. 1 allows any integer and 0.1 allows floats to one decimal place.\n   */\n  step: {\n    type: Number,\n    default: 1,\n  },\n});\n\nconst inputId = inject('inputId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {number} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { value } = useChangeEmits(emit, props);\n\n// ELEMENTS\nconst target = ref(null);\n\n// EXPOSE\ndefineExpose({\n  target,\n});\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n\n.input:invalid {\n  border-color: $error-dark;\n}\n</style>\n","<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <zoa-input\n      zoa-type=\"slider\"\n      :label=\"labelLower\"\n      :label-position=\"labelsRight ? 'right' : 'left'\"\n      :options=\"{\n        min,\n        max,\n        step,\n        validMax: maxLower,\n        valueLabelPosition: 'above',\n        placeholderPosition: 0.25,\n      }\"\n      v-model=\"valueLower\"\n      ref=\"lowerTrack\"\n    />\n    <zoa-input\n      zoa-type=\"slider\"\n      :label=\"labelUpper\"\n      :label-position=\"labelsRight ? 'right' : 'left'\"\n      :options=\"{\n        min,\n        max,\n        step,\n        validMin: minUpper,\n        placeholderPosition: 0.75,\n        activeTrackRight: true,\n      }\"\n      v-model=\"valueUpper\"\n      ref=\"upperTrack\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { useChangeEmits } from '../common.js';\nimport { computed, inject, ref, watch } from 'vue';\nimport { ZoaInput } from '../../index.js';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: Array,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * Number to set both sliders at initially.\n   */\n  placeholder: {\n    type: Number,\n    default: null,\n  },\n  /**\n   * The lowest number displayed on both sliders (will only be accessible by the lower value slider).\n   */\n  min: {\n    type: Number,\n    default: 0,\n  },\n  /**\n   * The highest number displayed on both sliders (will only be accessible by the upper value slider).\n   */\n  max: {\n    type: Number,\n    default: 100,\n  },\n  /**\n   * The granularity of accepted values; e.g. 1 allows any integer and 0.1 allows floats to one decimal place. Also the minimum gap between the two values.\n   */\n  step: {\n    type: Number,\n    default: 1,\n  },\n  /**\n   * The text label for the lower value slider.\n   */\n  labelLower: {\n    type: String,\n    default: 'Lower',\n  },\n  /**\n   * The text label for the upper value slider.\n   */\n  labelUpper: {\n    type: String,\n    default: 'Upper',\n  },\n  /**\n   * If true, place the slider text labels on the right rather than the left.\n   */\n  labelsRight: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst inputId = inject('inputId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {Array} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { valueChanged } = useChangeEmits(emit, props);\n\n// ELEMENTS\nconst trackLower = ref(null);\nconst trackUpper = ref(null);\n\n// EXPOSE\nconst target = computed(() => {\n  if (trackLower.value) {\n    return trackLower.value.target;\n  }\n});\nconst elements = computed(() => {\n  if (trackLower.value && trackUpper.value) {\n    return [trackLower.value.target, trackUpper.value.target];\n  } else {\n    return [];\n  }\n});\ndefineExpose({\n  target,\n  elements,\n});\n\nconst valueLower = ref(null);\nconst valueUpper = ref(null);\n\nconst maxLower = computed(() => {\n  return Math.max(\n    Number(valueUpper.value) - Number(props.step),\n    Number(props.min),\n  );\n});\nconst minUpper = computed(() => {\n  return Math.min(\n    Number(valueLower.value) + Number(props.step),\n    Number(props.max),\n  );\n});\n\nconst range = computed(() => {\n  // never return a lower value that's higher than the upper value or vice versa\n  const lower = Math.min(valueLower.value, maxLower.value);\n  const upper = Math.max(valueUpper.value, minUpper.value);\n  return [lower, upper];\n});\n\nwatch(range, () => {\n  valueChanged(range.value);\n});\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n</style>\n","<template>\n  <div\n    :class=\"$style.inputWrapper\"\n    @wheel=\"onScroll\"\n    :aria-labelledby=\"labelId\"\n    :aria-describedby=\"helpId\"\n  >\n    <span :class=\"$style.track\"></span>\n    <span\n      :class=\"[$style.track, $style['track--active']]\"\n      :style=\"activeTrackStyle\"\n    ></span>\n    <span\n      :class=\"[$style.valueLabel, $style[`valueLabel--${valueLabelPosition}`]]\"\n      :style=\"{ left: `${handlePosition.label}%` }\"\n      ref=\"valueLabel\"\n      tabindex=\"0\"\n      >{{ valueLabelText }}</span\n    >\n    <input\n      type=\"range\"\n      :min=\"min\"\n      :max=\"max\"\n      :step=\"step\"\n      :id=\"inputId\"\n      :class=\"$style.input\"\n      v-model=\"value\"\n      ref=\"slider\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { useChangeEmits } from '../common.js';\nimport { computed, inject, ref, watch } from 'vue';\nimport { onKeyStroke, useFocusWithin, useFocus } from '@vueuse/core';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: Number,\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * Number to set the slider at initially.\n   */\n  placeholder: {\n    type: [Number, undefined],\n    default: null,\n  },\n  /**\n   * The lowest number displayed on the slider.\n   */\n  min: {\n    type: Number,\n    default: 0,\n  },\n  /**\n   * The highest number displayed on the slider.\n   */\n  max: {\n    type: Number,\n    default: 100,\n  },\n  /**\n   * The granularity of accepted values; e.g. 1 allows any integer and 0.1 allows floats to one decimal place.\n   */\n  step: {\n    type: Number,\n    default: 1,\n  },\n  /**\n   * The fraction along the bar to set the value initially (as opposed to setting an explicit number); e.g. 0.5 sets an initial value halfway along the bar.\n   */\n  placeholderPosition: {\n    type: Number,\n    default: 0.5,\n  },\n  /**\n   * The position of the dynamic label displaying the current value (above or below the slider).\n   * @values above, below\n   */\n  valueLabelPosition: {\n    type: String,\n    default: 'below',\n  },\n  /**\n   * Do not allow values below this value; the handle will stop at this point, even if the `min` is lower than this.\n   */\n  validMin: {\n    type: Number,\n    default: null,\n  },\n  /**\n   * Do not allow values above this point; the handle will stop at this point, even if the `max` is higher than this.\n   */\n  validMax: {\n    type: Number,\n    default: null,\n  },\n  /**\n   * Highlight the track to the right of the handle rather than the left.\n   */\n  activeTrackRight: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst inputId = inject('inputId');\nconst labelId = inject('labelId');\nconst helpId = inject('helpId');\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {number} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { value } = useChangeEmits(emit, props);\n\n// ELEMENTS\nconst slider = ref(null);\nconst valueLabel = ref(null);\n\n// EXPOSE\ndefineExpose({\n  target: slider,\n});\n\n// PROP PROCESSING\nconst _validMin = computed(() => {\n  // set validMin to the min if not set\n  if (!props.validMin) {\n    return Number(props.min);\n  }\n  return Math.max(Number(props.validMin), Number(props.min));\n});\nconst _validMax = computed(() => {\n  // set validMax to the max if not set\n  if (!props.validMax) {\n    return Number(props.max);\n  }\n  return Math.min(Number(props.validMax), Number(props.max));\n});\n\n// STATE\nconst sliderFocus = useFocusWithin(slider);\nconst labelFocus = useFocus(valueLabel);\n\nconst valueLabelText = computed(() => {\n  // prevents the label flickering when trying to move it beyond its bounds\n  if (value.value < _validMin.value) {\n    return _validMin.value;\n  } else if (value.value > _validMax.value) {\n    return _validMax.value;\n  } else {\n    return value.value;\n  }\n});\n\nconst activeTrackStyle = computed(() => {\n  if (props.activeTrackRight) {\n    return { left: `${handlePosition.value.handle}%` };\n  } else {\n    return { right: `${100 - handlePosition.value.handle}%` };\n  }\n});\n\nconst fraction = computed(() => {\n  return (value.value - props.min) / (props.max - props.min);\n});\n\nconst handlePosition = computed(() => {\n  return getHandlePosition();\n});\n\n// FUNCTIONS\nfunction getHandlePosition() {\n  // the center of the slider is slightly offset to account for the size of the\n  // handle. this calculates the position of the middle of the handle along the\n  // track, accounting for the offset.\n  try {\n    const trackWidth = slider.value.clientWidth;\n    const handleWidth = 24; // set in CSS; including border!\n\n    // force update the inner text before the label width is calculated\n    if (valueLabel.value) {\n      valueLabel.value.innerText = valueLabelText.value;\n    }\n    const labelWidth = valueLabel.value ? valueLabel.value.clientWidth : 0;\n\n    const halfTrack = trackWidth / 2;\n    const currentPosition = fraction.value * trackWidth;\n    const centerOffset = (currentPosition - halfTrack) / halfTrack;\n    const offset = centerOffset * (handleWidth / 2);\n    const labelOffset = offset + labelWidth / 2;\n    const percentOffset = offset / trackWidth;\n    return {\n      handle: ((fraction.value - percentOffset) * 100).toFixed(2),\n      label: ((fraction.value - labelOffset / trackWidth) * 100).toFixed(2),\n    };\n  } catch {\n    // in case we can't get the clientWidth\n    const pos = fraction.value * 100;\n    return { handle: pos.toFixed(2), label: pos.toFixed(2) };\n  }\n}\n\nfunction getInitialValue() {\n  if (props.placeholder !== null && props.placeholder !== undefined) {\n    return props.placeholder;\n  }\n  let range = props.max - props.min;\n  let exactMidpoint = range / (1 / props.placeholderPosition);\n  let stepDeviation = exactMidpoint % props.step;\n  let stepMidpoint = exactMidpoint - stepDeviation;\n  return stepMidpoint + props.min;\n}\n\nfunction stepUp() {\n  if (value.value === props.max) {\n    return;\n  }\n  let newValue = Number(value.value) + Number(props.step);\n  if (newValue > props.max) {\n    value.value = props.max;\n  } else {\n    value.value = newValue;\n  }\n}\n\nfunction stepDown() {\n  if (value.value === props.min) {\n    return;\n  }\n  let newValue = Number(value.value) - Number(props.step);\n  if (newValue < props.min) {\n    value.value = props.min;\n  } else {\n    value.value = newValue;\n  }\n}\n\nfunction onScroll(event) {\n  event.preventDefault();\n  if (event.wheelDelta > 0) {\n    stepUp();\n  } else if (event.wheelDelta < 0) {\n    stepDown();\n  }\n}\n\n// KEYBINDINGS\nonKeyStroke('ArrowDown', (event) => {\n  event.preventDefault();\n  if (sliderFocus.focused.value || labelFocus.focused.value) {\n    stepDown();\n  }\n});\nonKeyStroke('ArrowLeft', (event) => {\n  event.preventDefault();\n  if (sliderFocus.focused.value || labelFocus.focused.value) {\n    stepDown();\n  }\n});\nonKeyStroke('ArrowUp', (event) => {\n  event.preventDefault();\n  if (sliderFocus.focused.value || labelFocus.focused.value) {\n    stepUp();\n  }\n});\nonKeyStroke('ArrowRight', (event) => {\n  event.preventDefault();\n  if (sliderFocus.focused.value || labelFocus.focused.value) {\n    stepUp();\n  }\n});\n\n// WATCHES\nwatch(value, (newValue) => {\n  // don't let the value exceed the valid min/max\n  if (Number(newValue) >= Number(_validMax.value)) {\n    value.value = _validMax.value;\n  }\n  if (Number(newValue) <= Number(_validMin.value)) {\n    value.value = _validMin.value;\n  }\n});\n\n// set an initial value\nvalue.value = getInitialValue();\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n\n$handleSize: 20px;\n$handleBorder: 2px;\n\n.input {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  background: transparent;\n  border: none;\n  outline: 0;\n  padding: 0;\n  margin: 0;\n  position: absolute;\n\n  &::-webkit-slider-thumb,\n  &::-moz-range-thumb {\n    appearance: none;\n    -webkit-appearance: none;\n    width: $handleSize;\n    height: $handleSize;\n    background: $primary;\n    cursor: pointer;\n    border-radius: 100%;\n    z-index: 100;\n    border: $handleBorder solid $grey;\n  }\n}\n\n.inputWrapper {\n  position: relative;\n  height: $handleSize + ($handleBorder * 2);\n}\n\n.track {\n  position: absolute;\n  height: 10px;\n  margin: auto;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  border-radius: $rounding;\n  background: $grey;\n\n  &.track--active {\n    background: $secondary;\n  }\n}\n\n.valueLabel {\n  position: absolute;\n  font-size: 0.8em;\n  padding: $half-pad;\n  border: 1px solid $grey;\n  border-radius: $rounding;\n  background: white;\n  height: 30px;\n\n  &.valueLabel--below {\n    top: $handleSize + ($handleBorder * 2) + 5px;\n  }\n\n  &.valueLabel--above {\n    bottom: $handleSize + ($handleBorder * 2) + 5px;\n  }\n}\n</style>\n","import ZoaAutocompleteTextbox from './textbox/AutocompleteTextbox.vue';\nimport ZoaCheckbox from './checkbox/Checkbox.vue';\nimport ZoaDateAmbiguous from './date/DateAmbiguous.vue';\nimport ZoaDateSimple from './date/DateSimple.vue';\nimport ZoaDropdown from './dropdown/Dropdown.vue';\nimport ZoaMultiselect from './dropdown/Multiselect.vue';\nimport ZoaNumber from './number/Number.vue';\nimport ZoaRangeSlider from './slider/RangeSlider.vue';\nimport ZoaSlider from './slider/Slider.vue';\nimport ZoaTextbox from './textbox/Textbox.vue';\n\nexport default {\n  checkbox: {\n    component: ZoaCheckbox,\n    multi: false,\n    delay: 0,\n    tabLabel: true,\n  },\n  'date-ambiguous': {\n    component: ZoaDateAmbiguous,\n    multi: false,\n    delay: 200,\n  },\n  'date-simple': {\n    component: ZoaDateSimple,\n    multi: false,\n    delay: 200,\n  },\n  dropdown: {\n    component: ZoaDropdown,\n    multi: false,\n    delay: 0,\n  },\n  multiselect: {\n    component: ZoaMultiselect,\n    multi: false,\n    delay: 0,\n  },\n  empty: {\n    component: null,\n    multi: true,\n  },\n  number: {\n    component: ZoaNumber,\n    multi: false,\n    delay: 200,\n  },\n  'range-slider': {\n    component: ZoaRangeSlider,\n    multi: true,\n    delay: 200,\n  },\n  slider: {\n    component: ZoaSlider,\n    multi: false,\n    delay: 200,\n    wrapperProps: ['valueLabelPosition'],\n  },\n  'autocomplete-textbox': {\n    component: ZoaAutocompleteTextbox,\n    multi: false,\n    delay: 200,\n  },\n  textbox: {\n    component: ZoaTextbox,\n    multi: false,\n    delay: 200,\n  },\n};\n","<template>\n  <div\n    :id=\"componentId\"\n    ref=\"rootContainer\"\n    :class=\"addPropClasses(rootClassKeys.map((k) => $style[k]))\"\n  >\n    <template v-if=\"zoaInput.multi\">\n      <fieldset :class=\"$style.fieldset\">\n        <zoa-label\n          :input-id=\"inputId\"\n          :legend=\"true\"\n          :label=\"label\"\n          :label-position=\"labelPosition\"\n          :tabbable=\"zoaInput.tabLabel\"\n        />\n        <zoa-help v-if=\"help\" :text=\"help\" :position=\"helpPosition\" />\n        <div\n          :class=\"[gridClass || $style.emptyGrid, $style.inputWrapper]\"\n          v-if=\"ZoaInputComponent == null\"\n        >\n          <slot />\n        </div>\n        <zoa-input-component\n          v-bind=\"options\"\n          v-model=\"value\"\n          ref=\"inputComponent\"\n          v-else\n        />\n      </fieldset>\n    </template>\n    <template v-else>\n      <zoa-label\n        :input-id=\"inputId\"\n        :legend=\"false\"\n        :label=\"label\"\n        :label-position=\"labelPosition\"\n        :tabbable=\"zoaInput.tabLabel\"\n        :help=\"help\"\n      />\n      <zoa-help v-if=\"help\" :text=\"help\" :position=\"helpPosition\" />\n      <zoa-input-component\n        v-bind=\"options\"\n        v-model=\"value\"\n        ref=\"inputComponent\"\n      />\n    </template>\n  </div>\n</template>\n\n<script setup>\nimport { useComponentId } from '../utils/compid.js';\nimport { useChangeEmits } from './common.js';\nimport { computed, provide, ref } from 'vue';\nimport { usePropClasses } from '../utils/classes.js';\nimport ZoaLabel from './_parts/Label.vue';\nimport ZoaHelp from './_parts/Help.vue';\nimport zoaInputConfig from './zoaInputs.js';\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    default: undefined,\n  },\n  /**\n   * Zoa input type.\n   * @values checkbox, date-ambiguous, date-simple, dropdown, multiselect, empty, number, range-slider, slider, autocomplete-textbox, textbox\n   */\n  zoaType: {\n    type: String,\n    default: 'empty',\n  },\n  /**\n   * Additional class(es) to add to the root element.\n   */\n  class: {\n    type: [String, Array, null],\n    default: null,\n  },\n  /**\n   * Text for the input label.\n   */\n  label: {\n    type: String,\n    default: 'Input',\n  },\n  /**\n   * Position of the input label (or none to only show to screenreaders).\n   * @values left, right, above, below, none\n   */\n  labelPosition: {\n    type: String,\n    default: 'above',\n  },\n  /**\n   * Parameters passed to the input.\n   */\n  options: {\n    type: Object,\n    default: () => {\n      return {};\n    },\n  },\n  /**\n   * Class(es) for the empty grid; only used if the zoaType is 'empty' or null.\n   * Defaults to an auto column grid if nothing is provided.\n   */\n  gridClass: {\n    type: [String, Array, null],\n    default: null,\n  },\n  /**\n   * Help text.\n   */\n  help: {\n    type: [String, null],\n    default: null,\n  },\n  /**\n   * Position of the help popup.\n   * @values left, right\n   */\n  helpPosition: {\n    type: String,\n    default: 'right',\n  },\n});\n\nconst zoaInput = computed(() => {\n  let _zoaInput = zoaInputConfig[props.zoaType];\n  if (_zoaInput == null) {\n    _zoaInput = zoaInputConfig['empty'];\n  }\n  return _zoaInput;\n});\nconst ZoaInputComponent = computed(() => {\n  return zoaInput.value.component;\n});\n\nconst { componentId, subId } = useComponentId();\nconst inputId = subId('input');\nconst labelId = subId('label');\nconst helpId = subId('help');\n\nconst rootClassKeys = computed(() => {\n  let _keys = [\n    'rootWrapper',\n    `rootWrapper--${props.labelPosition}`,\n    props.zoaType,\n  ];\n  if (!!props.help) {\n    _keys.push('rootWrapper--help');\n  }\n  if (zoaInput.value.wrapperProps) {\n    zoaInput.value.wrapperProps.forEach((p) => {\n      if (props.options[p] != null) {\n        _keys.push(`rootWrapper-${p}--${props.options[p]}`);\n      }\n    });\n  }\n  return _keys;\n});\nconst { addPropClasses } = usePropClasses(props);\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {boolean} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { value } = useChangeEmits(emit, props);\n\nconst rootContainer = ref(null);\n\n// PROVIDE\n// any provided variables that need to be reactive, e.g. props, should be\n// wrapped in computed properties; if not, only the initial value will be passed\nconst _label = computed(() => {\n  return props.label;\n});\nconst _labelPosition = computed(() => {\n  return props.labelPosition;\n});\nconst _helpId = computed(() => {\n  return props.help ? helpId : null;\n});\nprovide('label', _label);\nprovide('labelPosition', _labelPosition);\nprovide('componentId', componentId);\nprovide('subId', subId); // this *sort of* works\nprovide('inputId', inputId);\nprovide('labelId', labelId);\nprovide('helpId', _helpId);\nprovide('rootContainer', rootContainer);\n\nconst inputComponent = ref(null);\nfunction focus() {\n  if (inputComponent.value) {\n    inputComponent.value.target.focus();\n  }\n}\nfunction blur() {\n  if (inputComponent.value) {\n    inputComponent.value.target.blur();\n  }\n}\nconst target = computed(() => {\n  // the primary target, e.g. the input\n  if (inputComponent.value) {\n    return inputComponent.value.target;\n  }\n});\nconst elements = computed(() => {\n  // any other elements that might need to be exposed\n  if (inputComponent.value && inputComponent.value.elements) {\n    return inputComponent.value.elements;\n  } else {\n    return {};\n  }\n});\ndefineExpose({\n  focus,\n  blur,\n  target,\n  elements,\n});\n</script>\n\n<style module lang=\"scss\">\n@import 'inputs';\n\n.rootWrapper {\n  display: grid;\n  align-items: center;\n  gap: $label-gap;\n  grid-template-rows: auto;\n\n  // because sometimes the label is a <legend> and that has to be directly under\n  // the <fieldset> element, we can't group the label and help, so we end up\n  // with... this\n  &.rootWrapper--above {\n    grid-template-areas:\n      'label'\n      'input';\n    grid-template-columns: 1fr;\n\n    &.rootWrapper--help {\n      grid-template-areas:\n        'label help'\n        'input input';\n      grid-template-columns: 1fr auto;\n    }\n  }\n\n  &.rootWrapper--below {\n    grid-template-areas:\n      'input'\n      'label';\n    grid-template-columns: 1fr;\n\n    &.rootWrapper--help {\n      grid-template-areas:\n        'input input'\n        'label help';\n      grid-template-columns: 1fr auto;\n    }\n  }\n\n  &.rootWrapper--left {\n    grid-template-areas: 'label input';\n    grid-template-columns: auto 1fr;\n\n    &.rootWrapper--help {\n      grid-template-areas: 'label input help';\n      grid-template-columns: auto 1fr auto;\n    }\n  }\n\n  &.rootWrapper--right {\n    grid-template-areas: 'input label';\n    grid-template-columns: 1fr auto;\n\n    &.rootWrapper--help {\n      grid-template-areas: 'input label help';\n      grid-template-columns: 1fr auto auto;\n    }\n  }\n\n  &.rootWrapper--none {\n    grid-template-areas: 'input';\n    grid-template-columns: 1fr;\n\n    &.rootWrapper--help {\n      grid-template-areas: 'input help';\n      grid-template-columns: 1fr auto;\n    }\n  }\n}\n\n.checkbox {\n  &.rootWrapper {\n    width: auto;\n\n    &.rootWrapper--above {\n      & > label {\n        padding: 0;\n        justify-self: center;\n      }\n\n      &.rootWrapper--help {\n        grid-template-areas:\n          '. label help'\n          '. input .';\n        grid-template-columns: 1fr auto 1fr;\n      }\n    }\n\n    &.rootWrapper--below {\n      & > label {\n        padding: 0;\n        justify-self: center;\n      }\n\n      &.rootWrapper--help {\n        grid-template-areas:\n          '. input .'\n          '. label help';\n        grid-template-columns: 1fr auto 1fr;\n      }\n    }\n\n    &.rootWrapper--left {\n      grid-template-areas: 'label input .';\n      grid-template-columns: auto auto 1fr;\n\n      &.rootWrapper--help {\n        grid-template-areas: 'label input help';\n      }\n    }\n\n    &.rootWrapper--right {\n      grid-template-areas: 'input label .';\n      grid-template-columns: auto auto 1fr;\n\n      &.rootWrapper--help {\n        grid-template-areas: 'input label help';\n      }\n    }\n\n    &.rootWrapper--none {\n      &.rootWrapper--help {\n        grid-template-areas: 'input help';\n        grid-template-columns: auto 1fr;\n      }\n    }\n  }\n}\n\n.slider {\n  &.rootWrapper,\n  &.rootWrapper-valueLabelPosition--below {\n    // this is the default, so apply even if the class isn't specified\n    margin-bottom: 35px;\n  }\n\n  &.rootWrapper-valueLabelPosition--above {\n    margin-top: 35px;\n    margin-bottom: 0;\n  }\n}\n\n.range-slider {\n  &.rootWrapper--above {\n    & > fieldset > legend {\n      margin-bottom: -35px;\n    }\n  }\n  &.rootWrapper--below {\n    & > fieldset > legend {\n      margin-top: -35px;\n    }\n  }\n}\n\n.emptyGrid {\n  display: grid;\n  grid-auto-flow: column;\n}\n\n.fieldset {\n  border: none;\n  display: contents;\n}\n</style>\n","<template>\n  <ZoaButton v-bind=\"buttonArgs\" @click=\"openModal\" />\n  <dialog\n    ref=\"modal\"\n    :class=\"addPropClasses([$style.main, $style[`kind--${kind}`]])\"\n  >\n    <div :class=\"$style.container\">\n      <form method=\"dialog\" :class=\"$style.form\" @submit=\"emit('closed')\">\n        <button :class=\"$style.close\">\n          <font-awesome-icon icon=\"fa-solid fa-xmark\" />\n        </button>\n      </form>\n      <div :class=\"$style.header\">\n        <font-awesome-icon :icon=\"['fa-solid', icon]\" :class=\"$style.icon\" />\n        <h2>{{ header }}</h2>\n      </div>\n      <div :class=\"$style.content\">\n        <!-- @slot The main content of the modal; overrides the message prop. -->\n        <slot>\n          {{ message }}\n        </slot>\n      </div>\n    </div>\n  </dialog>\n</template>\n\n<script setup>\nimport { ZoaButton } from '../../index.js';\nimport { useKindIcon } from '../../utils/icons.js';\nimport FontAwesomeIcon from '../../../icons.js';\nimport { ref } from 'vue';\nimport { usePropClasses } from '../../utils/classes.js';\n\nconst props = defineProps({\n  /**\n   * Additional class(es) to add to the root element.\n   */\n  class: {\n    type: [String, Array, null],\n    default: null,\n  },\n  /**\n   * The type of message being displayed.\n   * @values info, success, warning, error\n   */\n  kind: {\n    type: String,\n    default: 'info',\n  },\n  /**\n   * The header for the modal.\n   */\n  header: {\n    type: String,\n    default: 'Here is an informational message.',\n  },\n  /**\n   * The body of the modal. Overridden by the default slot.\n   */\n  message: {\n    type: String,\n    default:\n      'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Duis at tellus at urna condimentum.',\n  },\n  buttonArgs: {\n    type: Object,\n    default: () => {\n      return {\n        label: 'Open modal',\n      };\n    },\n  },\n});\n\nconst emit = defineEmits([\n  /**\n   * Modal opened.\n   */\n  'opened',\n  /**\n   * Modal closed.\n   */\n  'closed',\n]);\n\nconst { icon } = useKindIcon(props);\nconst { addPropClasses } = usePropClasses(props);\nconst modal = ref(null);\n\nfunction openModal() {\n  modal.value.show();\n  emit('opened');\n}\n</script>\n\n<style module lang=\"scss\">\n@import '../dialogs';\n\n.main {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  @include media-less-than('sm') {\n    width: 90vw;\n  }\n\n  @include media-between('sm', 'md') {\n    width: 80vw;\n  }\n\n  @include media-between('md', 'lg') {\n    width: 70vw;\n  }\n\n  @include media-from('lg') {\n    width: 50vw;\n  }\n}\n\n.container {\n  grid-template-areas:\n    'header button'\n    'content content';\n  grid-template-columns: 1fr auto;\n}\n\n.form {\n  grid-area: button;\n}\n\n.close {\n  padding: 0;\n  background: none;\n  border: none;\n  cursor: pointer;\n}\n\n.header {\n  grid-area: header;\n}\n\n.content {\n  grid-area: content;\n}\n</style>\n"],"file":"assets/Modal-72e04429.js"}