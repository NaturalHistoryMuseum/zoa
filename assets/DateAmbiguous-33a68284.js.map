{"version":3,"mappings":"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","names":["en","dateNames","require$$0","dateUtils","__vitePreload","componentId","subId","useComponentId","valueChanged","useChangeEmits","emit","props","displayBox","ref","editing","container","focused","useFocusWithin","yearBtns","monthBtns","dayBtns","yearBtnsFocus","useFocus","yearBtnsFocusWithin","monthBtnsFocus","monthBtnsFocusWithin","dayBtnsFocus","dayBtnsFocusWithin","focusedContainer","computed","buttonContainer","focusedButtons","onKeyStroke","selectedElement","returnDate","year","month","day","displayDate","formatDate","refreshDisplay","guessedDates","_parseInput","event","du","parseInput","debounce","setDate","date","rawYear","yearOptions","starter","i","ix","multiplier","leapYear","padYear","opt","setYear","monthDays","monthOptions","datenames","setMonth","dayOptions","_","setDay","y","m","d","mName","watch"],"sources":["../../node_modules/date-names/en.js","../../node_modules/date-names/index.js","../../src/components/inputs/date/DateAmbiguous.vue"],"sourcesContent":["\"use strict\";\n\nmodule.exports = {\n  __locale: \"en\",\n  days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n  abbreviated_days: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n  months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n  abbreviated_months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  am: 'AM',\n  pm: 'PM'\n};\n","\"use strict\";\nmodule.exports = require('./en');\n","<template>\n  <div\n    :class=\"[$style.grid, $style[`grid--${labelPosition}`]]\"\n    :id=\"componentId\"\n    ref=\"container\"\n  >\n    <label\n      :for=\"subId('date')\"\n      v-if=\"label && labelPosition !== 'none'\"\n      :class=\"[$style.label, $style[`label--${labelPosition}`]]\"\n    >\n      {{ label }}\n    </label>\n    <div :class=\"$style.inputContainer\">\n      <input\n        type=\"text\"\n        :placeholder=\"placeholder\"\n        :id=\"subId('date')\"\n        :class=\"[$style.input, editing ? $style.editing : '']\"\n        ref=\"displayBox\"\n        @input=\"parseInput\"\n      />\n      <div v-if=\"focused\" :class=\"$style.datePopup\">\n        <div :class=\"$style.popupSection\" v-if=\"guessedDates.length > 0\">\n          <span\n            v-for=\"dt in guessedDates\"\n            @click=\"setDate(dt)\"\n            @keydown.enter=\"setDate(dt)\"\n            :class=\"$style.suggestion\"\n            tabindex=\"0\"\n            >{{ formatDate(dt.year, dt.month, dt.day) }}</span\n          >\n        </div>\n        <div :class=\"$style.popupSection\">\n          <ZoaNumber\n            label=\"year\"\n            label-position=\"left\"\n            :placeholder=\"1900\"\n            v-model=\"rawYear\"\n            :min=\"0\"\n            :max=\"9999\"\n          />\n          <div :class=\"$style.yearGrid\" tabindex=\"0\" ref=\"yearBtns\">\n            <ZoaButton\n              v-for=\"opt in yearOptions\"\n              size=\"sm\"\n              @click=\"setYear(opt)\"\n              tabindex=\"-1\"\n              >{{ padYear(opt) }}\n            </ZoaButton>\n          </div>\n        </div>\n        <div :class=\"$style.popupSection\">\n          <ZoaNumber\n            label=\"month\"\n            label-position=\"left\"\n            :placeholder=\"1\"\n            v-model=\"month\"\n            :min=\"1\"\n            :max=\"12\"\n          />\n          <div :class=\"$style.monthGrid\" tabindex=\"0\" ref=\"monthBtns\">\n            <ZoaButton\n              v-for=\"(opt, ix) in monthOptions\"\n              size=\"sm\"\n              @click=\"setMonth(ix + 1)\"\n              tabindex=\"-1\"\n              >{{ opt }}\n            </ZoaButton>\n          </div>\n        </div>\n        <div :class=\"$style.popupSection\">\n          <ZoaNumber\n            label=\"day\"\n            label-position=\"left\"\n            :placeholder=\"1\"\n            v-model=\"day\"\n            :min=\"1\"\n            :max=\"monthDays\"\n          />\n          <div :class=\"$style.dayGrid\" tabindex=\"0\" ref=\"dayBtns\">\n            <ZoaButton\n              v-for=\"opt in dayOptions\"\n              size=\"sm\"\n              @click=\"setDay(opt)\"\n              tabindex=\"-1\"\n            >\n              {{ opt }}\n            </ZoaButton>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { useComponentId } from '../../utils/compid.js';\nimport { useChangeEmits } from '../common.js';\nimport { ref, computed, watch } from 'vue';\nimport ZoaNumber from '../number/Number.vue';\nimport ZoaButton from '../button/Button.vue';\nimport { debounce } from 'dettle';\nimport datenames from 'date-names';\nimport { onKeyStroke, useFocus, useFocusWithin } from '@vueuse/core';\nconst dateUtils = () => import('../../utils/dates.js');\n\nconst props = defineProps({\n  /**\n   * @model\n   */\n  modelValue: {\n    type: Object,\n  },\n  /**\n   * Text for the input label.\n   */\n  label: {\n    type: String,\n    default: 'Date',\n  },\n  /**\n   * Position of the input label (or none).\n   * @values left, right, above, below, none\n   */\n  labelPosition: {\n    type: String,\n    default: 'above',\n  },\n  /**\n   * Debounce delay for the `change` event, in ms.\n   */\n  delay: {\n    type: Number,\n    default: 200,\n  },\n  /**\n   * Text to display in the blank input.\n   */\n  placeholder: {\n    type: String,\n    default: null,\n  },\n});\n\nconst { componentId, subId } = useComponentId();\n\nconst emit = defineEmits([\n  /**\n   * Emitted when the value changes; debounced if the delay prop is > 0.\n   * @arg {object} newValue the new value\n   */\n  'change',\n  /**\n   * @ignore\n   */\n  'update:modelValue',\n]);\nconst { valueChanged } = useChangeEmits(emit, props.delay);\n\n// STATE\nconst displayBox = ref(null);\nconst editing = ref(false);\nconst container = ref(null);\n\nconst { focused } = useFocusWithin(container);\n\n// YEAR/MONTH/DAY BUTTONS\nconst yearBtns = ref(null);\nconst monthBtns = ref(null);\nconst dayBtns = ref(null);\n\nconst yearBtnsFocus = useFocus(yearBtns);\nconst yearBtnsFocusWithin = useFocusWithin(yearBtns);\nconst monthBtnsFocus = useFocus(monthBtns);\nconst monthBtnsFocusWithin = useFocusWithin(monthBtns);\nconst dayBtnsFocus = useFocus(dayBtns);\nconst dayBtnsFocusWithin = useFocusWithin(dayBtns);\n\nconst focusedContainer = computed(() => {\n  let buttonContainer;\n  if (yearBtnsFocus.focused.value) {\n    buttonContainer = yearBtns.value;\n  } else if (monthBtnsFocus.focused.value) {\n    buttonContainer = monthBtns.value;\n  } else if (dayBtnsFocus.focused.value) {\n    buttonContainer = dayBtns.value;\n  }\n  return buttonContainer;\n});\n\nconst focusedButtons = computed(() => {\n  let buttonContainer;\n  if (yearBtnsFocusWithin.focused.value) {\n    buttonContainer = yearBtns.value;\n  } else if (monthBtnsFocusWithin.focused.value) {\n    buttonContainer = monthBtns.value;\n  } else if (dayBtnsFocusWithin.focused.value) {\n    buttonContainer = dayBtns.value;\n  }\n  return buttonContainer;\n});\n\nonKeyStroke('Enter', () => {\n  if (!focusedContainer) {\n    return;\n  }\n  focusedContainer.value.children[0].focus();\n});\n\nonKeyStroke('ArrowLeft', () => {\n  if (!focusedButtons.value) {\n    return;\n  }\n  const selectedElement = focusedButtons.value.querySelector('button:focus');\n  if (!selectedElement || !selectedElement.previousElementSibling) {\n    focusedButtons.value.children[\n      focusedButtons.value.children.length - 1\n    ].focus();\n  } else {\n    selectedElement.previousElementSibling.focus();\n  }\n});\n\nonKeyStroke('ArrowRight', () => {\n  if (!focusedButtons.value) {\n    return;\n  }\n  const selectedElement = focusedButtons.value.querySelector('button:focus');\n  if (!selectedElement || !selectedElement.nextElementSibling) {\n    focusedButtons.value.children[0].focus();\n  } else {\n    selectedElement.nextElementSibling.focus();\n  }\n});\n\n// OTHER KEYBINDINGS\nonKeyStroke('Escape', () => {\n  const selectedElement = container.value.querySelector('*:focus');\n  if (selectedElement) {\n    selectedElement.blur();\n  }\n});\n\n// THE MAIN DATE\nconst returnDate = computed(() => {\n  return {\n    year: year.value,\n    month: month.value,\n    day: day.value,\n  };\n});\nconst displayDate = computed(() => {\n  return formatDate(\n    returnDate.value.year,\n    returnDate.value.month,\n    returnDate.value.day,\n  );\n});\n\nfunction refreshDisplay() {\n  displayBox.value.value = displayDate.value;\n  editing.value = false;\n}\n\n// PARSING WRITTEN DATES\nconst guessedDates = ref([]);\n\nfunction _parseInput(event) {\n  editing.value = true;\n  dateUtils().then((du) => {\n    guessedDates.value = du.parseDate(event.target.value);\n  });\n}\n\nconst parseInput = debounce(_parseInput, 200);\n\nfunction setDate(date) {\n  rawYear.value = date.year;\n  month.value = date.month;\n  day.value = date.day;\n  guessedDates.value = [];\n}\n\n// YEAR\nconst rawYear = ref(null);\n\nconst yearOptions = computed(() => {\n  let starter = 11;\n  if (rawYear.value && rawYear.value >= 1000) {\n    starter = Math.floor(rawYear.value / 10) * 10;\n  } else if (rawYear.value && rawYear.value < 1000) {\n    starter = rawYear.value * 10;\n  }\n  return Array(10)\n    .fill(starter)\n    .map((i, ix) => {\n      return i + ix;\n    });\n});\n\nconst year = computed(() => {\n  if (!rawYear.value) {\n    return null;\n  }\n  if (rawYear.value >= 1000) {\n    return rawYear.value;\n  }\n  let multiplier = 10 ** (4 - rawYear.value.toString().length);\n  return rawYear.value * multiplier;\n});\n\nconst leapYear = computed(() => {\n  // in the gregorian calendar, assuming that most/all dates are going to be\n  // post 1582 and probably UK-based\n  if (year.value % 100 === 0) {\n    return year.value % 400 === 0;\n  }\n  return year.value % 4 === 0;\n});\n\nfunction padYear(opt) {\n  return opt.toString().padEnd(4, '0');\n}\n\nfunction setYear(opt) {\n  rawYear.value = opt;\n  if (day.value && day.value > monthDays.value) {\n    day.value = monthDays.value;\n  }\n}\n\n// MONTH\nconst month = ref(null);\n\nconst monthOptions = ref(datenames.abbreviated_months);\n\nconst monthDays = computed(() => {\n  const thirty = [4, 6, 9, 11];\n  if (thirty.includes(month.value)) {\n    return 30;\n  }\n  if (month.value === 2) {\n    return leapYear.value ? 29 : 28;\n  }\n  return 31;\n});\n\nfunction setMonth(opt) {\n  month.value = opt;\n  if (day.value && day.value > monthDays.value) {\n    day.value = monthDays.value;\n  }\n}\n\n// DAY\nconst day = ref(null);\n\nconst dayOptions = computed(() => {\n  return Array(monthDays.value)\n    .fill(1)\n    .map((_, ix) => ix + 1);\n});\n\nfunction setDay(opt) {\n  day.value = opt;\n}\n\n// UTILS\nfunction formatDate(y, m, d) {\n  const mName = datenames.abbreviated_months[m - 1];\n\n  if (y && m && d) {\n    return `${d} ${mName} ${y}`;\n  }\n  if (y && m) {\n    return `${mName} ${y}`;\n  }\n  if (y && d) {\n    return `${d} ??? ${y}`;\n  }\n  if (m && d) {\n    return `${d} ${mName}`;\n  }\n  if (y) {\n    return y;\n  }\n  if (m) {\n    return mName;\n  }\n  if (d) {\n    return `day ${d}`;\n  }\n  return null;\n}\n\n// this has to go at the end; refreshes the display in the box when the main date changes\nwatch(returnDate, () => {\n  refreshDisplay();\n  valueChanged(returnDate.value);\n});\n</script>\n\n<style module lang=\"scss\">\n@import '../inputs';\n\n.inputContainer {\n  position: relative;\n}\n\n.datePopup {\n  position: absolute;\n  max-width: 530px;\n  background: white;\n  border: 1px solid $grey;\n  border-radius: $rounding;\n  top: 100%;\n  left: $h-pad;\n  right: $h-pad;\n  margin-top: $v-pad;\n  padding: $padding;\n}\n\n.popupSection {\n  display: grid;\n  align-items: start;\n\n  @include media-from('lg') {\n    grid-template-columns: 35% 1fr;\n  }\n  @include media-less-than('lg') {\n    padding-bottom: 1em;\n  }\n  gap: 1em 2em;\n  padding: $padding;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid $grey;\n  }\n}\n\n.yearGrid {\n  display: flex;\n  flex-wrap: wrap;\n  //grid-template-columns: repeat(5, 1fr);\n  gap: 5px;\n}\n\n.monthGrid {\n  display: flex;\n  flex-wrap: wrap;\n  //grid-template-columns: repeat(6, 1fr);\n  gap: 5px;\n}\n\n.dayGrid {\n  display: flex;\n  flex-wrap: wrap;\n  //grid-template-columns: repeat(10, 1fr);\n  gap: 5px;\n}\n\n.editing {\n  font-style: italic;\n  color: #444;\n}\n\n.suggestion {\n  cursor: pointer;\n  text-decoration: underline;\n}\n</style>\n"],"file":"assets/DateAmbiguous-33a68284.js"}